{"version":3,"sources":["redux/types.ts","api.ts","redux/actions/app.action.ts","redux/actions/notification.action.ts","redux/actions/popup.action.ts","redux/actions/index.ts","hoc/OutsideClicker.tsx","components/Header.tsx","i18n.ts","components/Notification.tsx","redux/reducers/app.reducer.tsx","redux/reducers/notification.reducer.ts","redux/reducers/popup.reducer.ts","redux/reducers/index.ts","redux/store.ts","components/Deck/Default.deck.tsx","components/EditText.tsx","components/Deck/Active.deck.tsx","components/Deck/Adder.deck.tsx","components/Currsection.tsx","components/index.ts","components/modals/Confirm.tsx","components/modals/index.tsx","components/Pagination.tsx","pages/Decks.tsx","pages/Home.tsx","pages/Login.tsx","pages/Statistics.tsx","pages/Registration.tsx","pages/Play.tsx","pages/Store.tsx","pages/Rating.tsx","pages/Main.tsx","pages/User.tsx","pages/index.ts","routes.tsx","hoc/Authorization.tsx","components/Footer.tsx","App.tsx","index.tsx"],"names":["LANGS","ELangsInterface","API_URLS","REGISTRATION","CONFIG","LOGIN","AUTH","GET_DECKS","GET_DECK","GET_ALL_DECKS","SET_LIKE","ADD_DECK","CHANGE_DECK","SUBSCRIBE_DECK","DELETE_DECK","GET_SCORES","CLONE_DECK","GET_RATING","GET_USER","FAKE_DATA","url","JSON","parse","error","API","data","options","axios","get","params","token","localStorage","getItem","responseType","downloadFile","bodyRequest","post","Promise","resolve","reject","setTimeout","this","POST","GET","login","page","Boolean","then","res","__data","decks","map","deck","transormArrayOfDeck","id","name","isPrivate","is_private","countWords","count_words","countRepetitions","count_repetitions","mainLang","main_language","secondLang","second_language","author","author_login","owner","owner_login","description","countLikes","likes","activeLike","liked","cards","subscribed","ownedPage","subsPage","owned_page","subscribed_page","response","subscriptions","owned","console","log","catch","undefined","length","deckId","idDeck","changes","EStatusNotification","LangsInterface","alias","displayName","internationalName","POPUP_TYPES","APP","NOTIFY","ELangs","POPUP","person","type","payload","logout","addScores","scores","changeLang","lang","show","head","content","timeout","hide","actions","success","acepted","Actions","app","notification","popup","useOutsideClick","ref","callback","handleClick","e","current","contains","target","useEffect","document","addEventListener","removeEventListener","connector","connect","state","auth","user","f","Action","changeLangInterface","withTranslation","props","useState","dropdownVisible","openDropdownUser","menuVisible","openMenuUser","dropdownRef","useRef","match","useLocation","pathname","t","useTranslation","body","style","overflow","className","to","onClick","routes","filter","route","isLogin","path","icon","__lang","value","label","onChange","l","isSearchable","components","Control","children","rest","src","width","alt","color","balance","resources","en","translation","ru","i18n","use","initReactI18next","init","fallbackLng","interpolation","escapeValue","EStatus","initialState","EN","visible","close","rootReducer","combineReducers","action","setItem","removeItem","changeLanguage","composeEnhancers","composeWithDevTools","trace","traceLimit","store","createStore","applyMiddleware","thunkMiddleware","Notification","dispatch","NotificationContainer","iconSwitcher","WatchContainer","history","useHistory","thisRef","nameCard","card","index","main_word","answer","push","Deck","openDropdown","activedLike","changeSubscribed","watched","changeWatched","changeCountLikes","changePrivate","ReactDOM","createPortal","getElementById","enableMethods","enableEdit","edit","handleEdit","enableDelete","delete","enableClone","clone","enableChangePrivate","cursor","handleChangePrivate","enableSubscribe","subscribe","resp","err","handleChangeSubscribed","enableLike","like","likeUser","EditText","text","changeText","focus","editing","changeEditing","editTextRef","editTextInputRef","handleChangeEditing","open","newValue","onChanged","typeInput","currentTarget","onKeyPress","key","autoFocus","EditedCard","mainWordChanged","setMainWordChanged","answerChanged","setAnswerChanged","descriptionChanged","setDescriptionChanged","mainWord","changeMainWord","changeAnswer","changeDescription","display","top","positionElement","y","left","x","eventOnChangeMainWord","handleChangeMainWord","eventOnChangeSecondWord","handleChangeAnswer","cols","rows","eventOnChangeDescriptionCard","handleChangeDescription","__changes","save","DeckActive","changeCards","countCards","incCountCards","addChange","changeName","mainWordValue","changeMainWordValue","secondWordValue","changeSecondWordValue","descriptionCard","changeDescriptionCard","indexCard","changeIndexCard","currentCardOpened","changeCurrentCardOpened","visibleCardWatch","changeVisibleCardWatch","positionCard","changePositionCard","changeMainLang","changeSecondLang","mainWordRef","secondWordRef","descriptionDeckRef","descriptionCardRef","handleAddCard","newCard","oldCards","countCardsOld","oldChanges","handleSwapLangs","__mainLang","old","_new","payloadChangeName","handleChangeName","selected","defaultValue","placeholder","htmlFor","__cards","item","changesCard","offsetLeft","offsetTop","handleOpenCardForWatch","stopPropagation","_","_index","handleDeleteCard","enableCreate","dataNewDeck","price","create","enableSave","DeckAdd","add","Currsection","info","Object","keys","values","Components","Header","loader","querySelector","showLoader","classList","remove","hideLoader","Confirm","ModalContainer","successed","CONFIRM","bind","switchModals","React","PureComponent","Modal","Pagination","previousLabel","nextLabel","breakLabel","breakClassName","pageCount","countPages","marginPagesDisplayed","pageRangeDisplayed","onPageChange","changeCurrentPage","containerClassName","activeClassName","Decks","decksSubscriptions","decksOwned","isNewDeck","isEdit","deckEdit","countOwnedPages","countSubsPages","currentOwnedPage","currentSubsPage","setState","_e","applyChanges","accept","deleteDeck","setLike","valuePrivate","Number","addDeck","choosen","updateDecks","getDecks","owned_pages","subscription_pages","Fragment","handleCloseActiveEditingDeck","saveDeck","handleCloseActiveAddingDeck","createNewDeck","toUpperCase","editDeck","changeCountPages","handleChangeCurrentOwnedPage","handleUnsibscribe","handleChangeCurrentSubsPage","Component","Home","loginValidate","passwordValidate","createRef","password","preventDefault","onBlur","validateForm","clickLogin","Statistics","nameValidate","rpassword","registration","refer","onValidate","clickRegistration","LangToggler","mainLangBool","setMainLangBool","handleChangeLang","mainBool","changeable","ListResults","results","result","time","Play","TIME_CARD","currentLang","lastLang","endedWithLastLang","currentCard","valueInputAnswer","ended","showResults","visibleHint","array","i","j","Math","floor","random","idCard","getTimeDeck","getScoresAfterEndPlay","score","Date","getTime","time_card","ceil","split","ans","trim","toLowerCase","includes","valueAnswer","checkCard","nextCard","suc","__card","getDeck","shuffleCards","handleForceFinishGame","handleHint","handleSkipCard","handleChangeInputAnswer","handleNextCard","getResults","notify","Store","currentPage","cloneDeck","getAllDecks","pages","handleClone","handleLike","handleChangeCurrentPage","Rating","rating","enableProps","getRating","users","reduce","prev","curr","Main","Pages","Registration","Login","User","useParams","setUser","setLoader","getUser","hideScrollbars","isNavBar","isExact","component","FaHome","FaPlay","FaList","FaStore","FaChartBar","FaStar","Athorization","WrappedComponent","WithAuthorization","Footer","href","getFullYear","popupProps","confirm","Switcher","Authorization","exact","render"],"mappings":"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","file":"static/js/main.259a934a.chunk.js","sourcesContent":["export enum LANGS{\r\n\tRUS = \"RUS\", \r\n\tENG = \"ENG\", \r\n\tJPN = \"JPN\", \r\n\tCHI = \"CHI\", \r\n\tITA = \"ITA\", \r\n\tSPA = \"SPA\",\r\n\tFRA = \"FRA\", \r\n\tGER = \"GER\"\r\n}\r\n\r\nexport enum ELangsInterface{\r\n\tEN = \"en\",\r\n\tRU = \"ru\"\r\n}\r\n\r\nexport const LangsInterface = [\r\n\t{\r\n\t\talias: \"en\",\r\n\t\tdisplayName: \"English\",\r\n\t\tinternationalName: \"ENG\"\r\n\t},\r\n\t{\r\n\t\talias: \"ru\",\r\n\t\tdisplayName: \"\",\r\n\t\tinternationalName: \"RUS\"\r\n\t},\r\n\r\n]\r\n\r\nexport enum EStatusNotification{\r\n\tSUCCESS = \"SUCCESS\", \r\n\tERROR = \"ERROR\", \r\n\tWARNING = \"WARNING\"\r\n}\r\n\r\n\r\nexport const APP = {\r\n\tLOGIN: \"APP/LOGIN\",\r\n\tLOGOUT: \"APP/LOGOUT\",\r\n\tADD_SCORES: \"APP/ADD_SCORES\",\r\n\tCHANGE_LANG: \"APP/CHANGE_LANG\"\r\n}\r\n\r\nexport const NOTIFY = {\r\n\tSHOW: \"NOTIFY/SHOW\",\r\n\tHIDE: \"NOTIFY/HIDE\",\r\n}\r\n\r\nexport enum POPUP_TYPES{\r\n\t\"ALERT\", \"CONFIRM\", \"PROMPT\"\r\n}\r\nexport const POPUP = {\r\n\tSHOW: \"POPUP/SHOW\",\r\n\tHIDE: \"POPUP/HIDE\",\r\n\tSUCCESS: \"POPUP/SUCCESS\",\r\n}","import axios from 'axios';\r\nimport * as CONFIG from './config.json';\r\nimport { ActionChange } from './domains/entities/actions.entity';\r\nimport { IDeck } from './domains/entities/dek.entity';\r\nimport { User } from './domains/entities/user.entity';\r\n\r\ninterface OptionsRequest{\r\n\ttoken?: boolean\r\n\tdownloadFile?: boolean\r\n}\r\n\r\nconst API_URLS = {\r\n\tREGISTRATION: CONFIG.HOST + CONFIG.URLS.REGISTRATION,\r\n\tLOGIN: CONFIG.HOST + CONFIG.URLS.LOGIN,\r\n\tAUTH: CONFIG.HOST + CONFIG.URLS.AUTH,\r\n\tGET_DECKS: CONFIG.HOST + CONFIG.URLS.GET_DECKS,\r\n\tGET_DECK: CONFIG.HOST + CONFIG.URLS.GET_DECK,\r\n\tGET_ALL_DECKS: CONFIG.HOST + CONFIG.URLS.GET_ALL_DECKS,\r\n\tSET_LIKE: CONFIG.HOST + CONFIG.URLS.SET_LIKE,\r\n\tADD_DECK: CONFIG.HOST + CONFIG.URLS.ADD_DECK,\r\n\tCHANGE_DECK: CONFIG.HOST + CONFIG.URLS.CHANGE_DECK,\r\n\tSUBSCRIBE_DECK: CONFIG.HOST + CONFIG.URLS.SUBSCRIBE_DECK,\r\n\tDELETE_DECK: CONFIG.HOST + CONFIG.URLS.DELETE_DECK,\r\n\tGET_SCORES: CONFIG.HOST + CONFIG.URLS.GET_SCORES,\r\n\tCLONE_DECK: CONFIG.HOST + CONFIG.URLS.CLONE_DECK,\r\n\tGET_RATING: CONFIG.HOST + CONFIG.URLS.GET_RATING,\r\n\tGET_USER: CONFIG.HOST + CONFIG.URLS.GET_USER\r\n};\r\n\r\nconst FAKE_DATA = (url: string) => {\r\n\tswitch (url) {\r\n\t\tcase API_URLS.GET_DECK:\r\n\t\t\treturn JSON.parse(`\r\n\t\t\t\t{\r\n\t\t\t\t\t\"deck\": {\r\n\t\t\t\t\t\t\"is_private\": 0,\r\n\t\t\t\t\t\t\"author_login\": \"admin\",\r\n\t\t\t\t\t\t\"cards\": [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"answer\": \"\",\r\n\t\t\t\t\t\t\t\t\"description\": null,\r\n\t\t\t\t\t\t\t\t\"id\": 1,\r\n\t\t\t\t\t\t\t\t\"main_word\": \"rap\",\r\n\t\t\t\t\t\t\t\t\"type\": \"default\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"answer\": \"\",\r\n\t\t\t\t\t\t\t\t\"description\": null,\r\n\t\t\t\t\t\t\t\t\"id\": 3,\r\n\t\t\t\t\t\t\t\t\"main_word\": \"flow\",\r\n\t\t\t\t\t\t\t\t\"type\": \"default\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"answer\": \"\",\r\n\t\t\t\t\t\t\t\t\"description\": null,\r\n\t\t\t\t\t\t\t\t\"id\": 22,\r\n\t\t\t\t\t\t\t\t\"main_word\": \"guap\",\r\n\t\t\t\t\t\t\t\t\"type\": \"default\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"answer\": \"\",\r\n\t\t\t\t\t\t\t\t\"description\": null,\r\n\t\t\t\t\t\t\t\t\"id\": 32,\r\n\t\t\t\t\t\t\t\t\"main_word\": \"guap\",\r\n\t\t\t\t\t\t\t\t\"type\": \"default\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\"is_owner\": false,\r\n\t\t\t\t\t\t\"owner_login\": \"admin\",\r\n\t\t\t\t\t\t\"description\": \"   \",\r\n\t\t\t\t\t\t\"count_repetitions\": 0,\r\n\t\t\t\t\t\t\"liked\": true,\r\n\t\t\t\t\t\t\"subscribed\": true,\r\n\t\t\t\t\t\t\"main_language\": \"eng\",\r\n\t\t\t\t\t\t\"second_language\": \"rus\",\r\n\t\t\t\t\t\t\"price\": 0,\r\n\t\t\t\t\t\t\"count_words\": 4,\r\n\t\t\t\t\t\t\"name\": \"rap\",\r\n\t\t\t\t\t\t\"id\": 1,\r\n\t\t\t\t\t\t\"likes\": 2\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t`);\r\n\t\tdefault:\r\n\t\t\treturn {\r\n\t\t\t\terror: true,\r\n\t\t\t};\r\n\t}\r\n};\r\n\r\n// Static class for wokring with API\r\nclass API {\r\n\tprivate static GET(url: string, data: any, options?: OptionsRequest): Promise<any> {\r\n\t\treturn axios.get(\r\n\t\t\turl,\r\n\t\t\t{\r\n\t\t\t\tparams: options?.token ? {\r\n\t\t\t\t\t...data,\r\n\t\t\t\t\ttoken: localStorage.getItem('token') || '',\r\n\t\t\t\t} : {\r\n\t\t\t\t\t...data,\r\n\t\t\t\t},\r\n\t\t\t\tresponseType: options?.downloadFile ? 'blob' : 'json',\r\n\t\t\t},\r\n\t\t);\r\n\t}\r\n\r\n\tprivate static POST(url: string, data: any, options?: OptionsRequest): Promise<any> {\r\n\t\tconst bodyRequest = options?.token ? {\r\n\t\t\t...data,\r\n\t\t\ttoken: localStorage.getItem('token') || '',\r\n\t\t} : {\r\n\t\t\t...data,\r\n\t\t};\r\n\t\treturn axios.post(\r\n\t\t\turl,\r\n\t\t\tbodyRequest,\r\n\t\t\t{\r\n\t\t\t\tresponseType: options?.downloadFile ? 'blob' : 'json',\r\n\t\t\t},\r\n\t\t);\r\n\t}\r\n\r\n\tprivate static GETFake(url: string, data: any, options?: OptionsRequest): Promise<any> {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tresolve({ data: FAKE_DATA(url) });\r\n\t\t\t}, 100);\r\n\t\t});\r\n\t}\r\n\r\n\t// --------------------------------------------------------------------------\r\n\t// ---------------- Registration, Login, Auth and User Info -----------------\r\n\t// --------------------------------------------------------------------------\r\n\r\n\tpublic static registration(data: any): Promise<any> {\r\n\t\treturn this.POST(API_URLS.REGISTRATION, data);\r\n\t}\r\n\r\n\tpublic static login(data: any): Promise<any> {\r\n\t\treturn this.POST(API_URLS.LOGIN, data);\r\n\t}\r\n\r\n\tpublic static auth(): Promise<any> {\r\n\t\treturn this.GET(API_URLS.AUTH, { }, { token: true });\r\n\t}\r\n\r\n\tpublic static getUser(login: string, page?: number): Promise<User & {decks: IDeck[]}> {\r\n\t\treturn this.GET(API_URLS.GET_USER, { login, page }, { token: Boolean(localStorage.getItem(\"token\")) }).then((res: any) => {\r\n\t\t\tconst __data = res.data\r\n\t\t\tconst decks = __data.decks.map((deck: any) => this.transormArrayOfDeck(deck))\r\n\t\t\treturn {\r\n\t\t\t\t...__data,\r\n\t\t\t\tdecks: [...decks]\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// --------------------------------------------------------------------------\r\n\t// -------------------------- Decks and Cards -------------------------------\r\n\t// --------------------------------------------------------------------------\r\n\r\n\t// ***GET DATA***\r\n\r\n\t// get decks for certain user (with token)\r\n\tprivate static transormArrayOfDeck(deck: any): IDeck {\r\n\t\treturn {\r\n\t\t\tid: deck.id,\r\n\t\t\tname: deck.name,\r\n\t\t\tisPrivate: deck.is_private,\r\n\t\t\tcountWords: deck.count_words,\r\n\t\t\tcountRepetitions: deck.count_repetitions,\r\n\t\t\tmainLang: deck.main_language,\r\n\t\t\tsecondLang: deck.second_language,\r\n\t\t\tauthor: deck.author_login,\r\n\t\t\towner: deck.owner_login,\r\n\t\t\tdescription: deck.description,\r\n\t\t\tcountLikes: deck.likes,\r\n\t\t\tactiveLike: deck.liked,\r\n\t\t\tcards: deck.cards,\r\n\t\t\tsubscribed: deck.subscribed,\r\n\t\t};\r\n\t}\r\n\r\n\tpublic static getDecks(ownedPage: number, subsPage: number): Promise<any> {\r\n\t\treturn new Promise<any>((resolve, reject) => {\r\n\t\t\tthis.GET(API_URLS.GET_DECKS, { owned_page: ownedPage, subscribed_page: subsPage }, { token: true })\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tconst data = {\r\n\t\t\t\t\t\tsubscriptions: response.data.subscriptions.map((deck: any) => this.transormArrayOfDeck(deck)),\r\n\t\t\t\t\t\towned: response.data.owned.map((deck: any) => this.transormArrayOfDeck(deck)),\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconsole.log({\r\n\t\t\t\t\t\t...response.data,\r\n\t\t\t\t\t\t...data,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tresolve({\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t...response.data,\r\n\t\t\t\t\t\t\t...data,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => reject({error: true}))\r\n\t\t});\r\n\t}\r\n\r\n\tpublic static getDeck(id: number): Promise<any> {\r\n\t\treturn new Promise<any>((resolve, reject) => {\r\n\t\t\tthis.GET(API_URLS.GET_DECK, (localStorage.getItem('token')?.length !== undefined ? { token: localStorage.getItem('token'), id } : { id }))\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\tif(response.data.error){\r\n\t\t\t\t\t\treject({error: true})\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconst data: IDeck = this.transormArrayOfDeck(response.data.deck);\r\n\t\t\t\t\t\tresolve({\r\n\t\t\t\t\t\t\tdeck: data,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tpublic static getAllDecks(page?: number): Promise<any> {\r\n\t\treturn new Promise<any>((resolve, reject) => {\r\n\t\t\tthis.GET(API_URLS.GET_ALL_DECKS, (localStorage.getItem('token')?.length !== undefined ? { token: localStorage.getItem('token'), page } : { page }))\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tconst data: IDeck = response.data.decks.map((deck: any) => this.transormArrayOfDeck(deck));\r\n\t\t\t\t\tresolve({\r\n\t\t\t\t\t\t...response,\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t...response.data,\r\n\t\t\t\t\t\t\tdecks: data,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t// ***POST DATA***\r\n\tpublic static addDeck(data: any): Promise<any> {\r\n\t\treturn this.POST(API_URLS.ADD_DECK, data, { token: true });\r\n\t}\r\n\r\n\tpublic static deleteDeck(deckId: number): Promise<any> {\r\n\t\treturn this.POST(API_URLS.DELETE_DECK, { deckId }, { token: true });\r\n\t}\r\n\r\n\tpublic static getScoresAfterEndPlay(data: any, deckId: number): Promise<any> {\r\n\t\treturn this.POST(API_URLS.GET_SCORES, { ...data, deckId }, { token: true });\r\n\t}\r\n\r\n\tpublic static cloneDeck(deckId: number): Promise<any> {\r\n\t\treturn this.POST(API_URLS.CLONE_DECK, { deckId }, { token: true });\r\n\t}\r\n\r\n\t// ***CHANGE DATA***\r\n\tpublic static applyChanges(idDeck: number, changes: ActionChange[]) {\r\n\t\treturn this.POST(API_URLS.CHANGE_DECK, { idDeck, changes }, { token: true });\r\n\t}\r\n\r\n\t// specific methods\r\n\tpublic static setLike(deckId: number): Promise<any> {\r\n\t\treturn this.POST(API_URLS.SET_LIKE, { deckId }, { token: true });\r\n\t}\r\n\r\n\tpublic static subscribe(deckId: number): Promise<any> {\r\n\t\treturn this.POST(API_URLS.SUBSCRIBE_DECK, { deckId }, { token: true });\r\n\t}\r\n\r\n\t// -----------------------------------------------------------------------------\r\n\t// ------------------------------- Rating --------------------------------------\r\n\t// -----------------------------------------------------------------------------\r\n\r\n\tpublic static getRating(page?: number): Promise<any> {\r\n\t\treturn this.GET(API_URLS.GET_RATING, { }, { token: false });\r\n\t}\r\n\t\r\n}\r\n\r\nexport default API;\r\n","import { APP, ELangsInterface } from \"../types\"\r\n\r\n// enum ERefer {NOT, GOOGLE, VK, FACEBOOK}\r\nenum ELangs {\r\n\t\"en\", \"ru\"\r\n}\r\n\r\nexport interface IPerson{\r\n\tlogin: string,\r\n\tname: string\r\n\tbalance: number\r\n}\r\n\r\nexport const login = (person: IPerson) => {\r\n\treturn {\r\n\t\ttype: APP.LOGIN,\r\n\t\tpayload: person\r\n\t}\r\n}\r\nexport const logout = () => {\r\n\treturn {\r\n\t\ttype: APP.LOGOUT,\r\n\t}\r\n}\r\n\r\nexport const addScores = (scores: number) => {\r\n\treturn {\r\n\t\ttype: APP.ADD_SCORES,\r\n\t\tpayload: scores\r\n\t}\r\n}\r\n\r\nexport const changeLang = (lang: ELangsInterface) => ({\r\n\ttype: APP.CHANGE_LANG,\r\n\tpayload: lang\r\n})","import { NOTIFY } from \"../types\" \r\n\r\nexport const show = (type: string, head: string, content: string, timeout = 300) => ({\r\n\ttype: NOTIFY.SHOW,\r\n\tpayload: {\r\n\t\ttype,\r\n\t\thead,\r\n\t\tcontent,\r\n\t\ttimeout\r\n\t}\r\n})\r\n\r\nexport const hide = () => ({\r\n\ttype: NOTIFY.HIDE\r\n})","import { POPUP, POPUP_TYPES } from \"../types\" \r\n\r\ninterface ActionsMethodPopup{\r\n\tclose: () => void\r\n\tsuccess?: (suc: boolean) => void\r\n}\r\n\r\nexport const show = (type: POPUP_TYPES, head: string, content: string, actions: ActionsMethodPopup) => ({\r\n\ttype: POPUP.SHOW,\r\n\tpayload: {\r\n\t\ttype,\r\n\t\thead,\r\n\t\tcontent,\r\n\t\tactions\r\n\t}\r\n})\r\n\r\nexport const hide = () => ({\r\n\ttype: POPUP.HIDE\r\n})\r\n\r\nexport const success = (acepted: boolean) => ({\r\n\ttype: POPUP.SUCCESS,\r\n\tpayload: acepted\r\n})","import * as app from \"./app.action\"\r\nimport * as notification from \"./notification.action\"\r\nimport * as popup from \"./popup.action\"\r\n\r\nconst Actions = {\r\n\tapp,\r\n\tnotification,\r\n\tpopup\r\n}\r\n\r\nexport default Actions","import { useEffect } from \"react\";\r\n\r\nconst useOutsideClick = (ref: any, callback: () => void) => {\r\n  const handleClick = (e: any) => {\r\n    if (ref.current && !ref.current.contains(e.target)) {\r\n      callback();\r\n    } \r\n  };\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"click\", handleClick);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"click\", handleClick);\r\n    };\r\n  });\r\n};\r\n\r\nexport default useOutsideClick;\r\n","import React, {  useEffect, useRef, useState } from 'react'\r\nimport { Link, useLocation } from 'react-router-dom'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport Select, { components } from 'react-select'\r\nimport { FaUser, FaBars } from \"react-icons/fa\"\r\n\r\n// Controllers data\r\nimport { IRoute } from \"../routes\"\r\nimport Action from \"../redux/actions\"\r\nimport useOutsideClick from \"../hoc/OutsideClicker\"\r\n\r\n// Styles\r\nimport \"../styles/components.scss\"\r\nimport \"../styles/vars.scss\"\r\nimport { Dispatch } from 'redux'\r\nimport { RootState } from '../redux/store'\r\nimport { User } from '../domains/entities/user.entity'\r\nimport { ELangsInterface, LangsInterface } from '../redux/types'\r\nimport { useTranslation, withTranslation } from 'react-i18next'\r\n\r\n// -----------------------------------------------------------------------------\r\n// ---------------------- Connect to redux emmiter -----------------------------\r\n// -----------------------------------------------------------------------------\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\tauth: state.app.auth,\r\n\tuser: state.app.user,\r\n\tlang: state.app.lang\r\n})\r\n\r\nconst mapDispatchToProps = (f: Dispatch) => ({\r\n\tlogin: (user: User) => f(Action.app.login(user)),\r\n\tlogout: () => f(Action.app.logout()),\r\n\tchangeLangInterface: (lang: ELangsInterface) => f(Action.app.changeLang(lang))\r\n})\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>\r\n\r\n\r\n\r\ninterface AppProps extends PropsFromRedux{\r\n\troutes: IRoute[]\r\n}\r\n\r\n// -----------------------------------------------------------------------------\r\n// -------------------- Header hook including interfaces -----------------------\r\n// -----------------------------------------------------------------------------\r\n\r\nconst Header: React.FC<AppProps> = props => {\r\n\r\n\tconst [dropdownVisible, openDropdownUser] = useState(false)\r\n\tconst [menuVisible, openMenuUser] = useState(false)\r\n\r\n\tconst dropdownRef = useRef<HTMLUListElement>(null)\r\n\tconst match = useLocation().pathname\r\n\r\n\tconst { t } = useTranslation()\r\n\r\n\tuseOutsideClick(dropdownRef, () => {\r\n\t\tif(dropdownVisible) openDropdownUser(false)\r\n\t})\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif(menuVisible)\r\n\t\t\tdocument.body.style.overflow = 'hidden'\r\n\t\telse\r\n\t\t\tdocument.body.style.overflow = 'unset'\r\n\t}, [menuVisible ])\r\n\r\n\tconst logout = () => {\r\n\t\tprops.logout()\r\n\t\topenMenuUser(false)\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<header className=\"main_header\">\r\n\t\t\t<div className=\"logo\">\r\n\t\t\t\t<span className=\"logo_text\"><Link to=\"/\" onClick={() => openMenuUser(false)}>RepDict</Link></span>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"menu\">\r\n\t\t\t\t<div className=\"icon_bars\" onClick={() => openMenuUser(!menuVisible)}>\r\n\t\t\t\t\t<FaBars />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<ul className={`menu_list responsive_${menuVisible ? \"active\": \"noactive\"}`}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprops.routes.filter(route => route.isLogin === props.auth || route.isLogin === undefined)\r\n\t\t\t\t\t\t\t.map((route: IRoute) => {\r\n\t\t\t\t\t\t\treturn <li \r\n\t\t\t\t\t\t\t\tkey={route.path} \r\n\t\t\t\t\t\t\t\tclassName={`menu_list_item ${route.path === match ? \"active\": \"noactive\"}`}>\r\n\t\t\t\t\t\t\t\t\t<Link \r\n\t\t\t\t\t\t\t\t\t\tclassName=\"menu_list_item_link\" \r\n\t\t\t\t\t\t\t\t\t\tto={`${route.path}`} onClick={() => openMenuUser(false)}>\r\n\t\t\t\t\t\t\t\t\t\t{!!route.icon && <route.icon/>}\r\n\t\t\t\t\t\t\t\t\t\t{t(`Components.Header.${route.name}`)}\r\n\t\t\t\t\t\t\t\t\t\t{/* {route.name} */}\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{/* <div className=\"theme_interface_toggler\">\r\n\t\t\t\t\t\tDark/Light\r\n\t\t\t\t\t</div>*/}\r\n\t\t\t\t\t<div className=\"language_interaface_toggler\">\r\n\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\toptions={LangsInterface.map(__lang => {return { value: __lang.alias, label: __lang.displayName }})}\r\n\t\t\t\t\t\t\tonChange={e => props.changeLangInterface(e?.value as ELangsInterface)}\r\n\t\t\t\t\t\t\tvalue={{ value: props.lang, label: (LangsInterface.filter(l => l.alias === props.lang))[0].displayName}}\r\n\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t// theme={(theme: any) => ({\r\n\t\t\t\t\t\t\t// \t...theme,\r\n\t\t\t\t\t\t\t// \tborderRadius: 5,\r\n\t\t\t\t\t\t\t// \tcolors: {\r\n\t\t\t\t\t\t\t// \t\t...theme.colors,\r\n\t\t\t\t\t\t\t// \t\tprimary25: 'red',\r\n\t\t\t\t\t\t\t// \t\tprimary: 'black',\r\n\t\t\t\t\t\t\t// \t\tneutral0: \"#202022\"\r\n\t\t\t\t\t\t\t// \t},\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// })}\r\n\t\t\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\t\t\tControl: ({ children, ...rest }) => (\r\n\t\t\t\t\t\t\t\t\t<components.Control {...rest}>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"img_wrapper pl-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t<img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/4/43/OOjs_UI_icon_language-ltr.svg/1024px-OOjs_UI_icon_language-ltr.svg.png\" width={20} alt=\"lang\"/>\r\n\t\t\t\t\t\t\t\t\t\t</div>{children}\r\n\t\t\t\t\t\t\t\t\t</components.Control>\r\n\t\t\t\t\t\t\t\t)}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{/* <select \r\n\t\t\t\t\t\t\tclassName=\"select_lang form-select\" \r\n\t\t\t\t\t\t\taria-label=\"Default select example\"\r\n\t\t\t\t\t\t\tonChange={e => props.changeLangInterface(e.currentTarget.value as ELangsInterface)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tLangsInterface.map(langItem => {\r\n\t\t\t\t\t\t\t\t\treturn <option \r\n\t\t\t\t\t\t\t\t\t\tselected={langItem.alias === props.lang}\r\n\t\t\t\t\t\t\t\t\t\tkey={langItem.internationalName} \r\n\t\t\t\t\t\t\t\t\t\tvalue={langItem.alias}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{langItem.displayName}\r\n\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</select> */}\r\n\t\t\t\t\t</div> \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// User panel\r\n\t\t\t\t\t\tprops.auth && <li style={{ color: \"white\" }} className=\"user_panel\" onClick={() => openDropdownUser(!dropdownVisible)}>\r\n\t\t\t\t\t\t\t<div className=\"user_panel_head\"><FaUser />{props.user.name} <span className=\"user__balance\">{props.user.balance}</span></div>\r\n\t\t\t\t\t\t\t<ul className={`dropdown ${dropdownVisible? \"showedDB__fadeIn\": \"closed\"}`} ref={dropdownRef}>\r\n\t\t\t\t\t\t\t\t<li className=\"dropdown_item\">\r\n\t\t\t\t\t\t\t\t\t<Link to={`/user/${props.user.login}`} onClick={() => openMenuUser(false)}>{t(`Components.Header.Profile`)}</Link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li className=\"dropdown_item\">\r\n\t\t\t\t\t\t\t\t\t<Link to=\"/settings\" onClick={() => openMenuUser(false)}>{t(`Components.Header.Settings`)}</Link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li className=\"dropdown_item\">\r\n\t\t\t\t\t\t\t\t\t<Link to=\"/\" onClick={() => logout()}>{t(`Components.Header.Logout`)}</Link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t}\r\n\t\t\t\t</ul>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t);\r\n}\r\n\r\nexport default connector(withTranslation()(Header))\r\n\r\n","import i18n from \"i18next\";\r\nimport { initReactI18next } from \"react-i18next\";\r\nimport translationEN from './locales/en/translation.json';\r\nimport translationRU from './locales/ru/translation.json';\r\n\r\n// the translations\r\nconst resources = {\r\n  en: {\r\n    translation: translationEN\r\n  },\r\n  ru: {\r\n    translation: translationRU\r\n  },\r\n};\r\ni18n\r\n  .use(initReactI18next)\r\n  // .use(reactI18nextModule as Module) // passes i18n down to react-i18next\r\n  .init({\r\n    resources,\r\n    fallbackLng: localStorage.getItem(\"i18nextLng\") as string || \"en\",\r\n    // keySeparator: false, // we do not use keys in form messages.welcome\r\n    interpolation: {\r\n      escapeValue: false // react already safes from xss\r\n    }\r\n  });\r\nexport default i18n;","import React, { useState } from \"react\"\r\nimport Action from \"../redux/actions\"\r\nimport store from \"../redux/store\"\r\n\r\nimport { FaCheckCircle, FaExclamationCircle, FaExclamationTriangle, FaTimes, FaTimesCircle } from \"react-icons/fa\"\r\n\r\nimport \"../styles/components/notification.scss\"\r\n\r\nenum EStatus{\r\n\tSUCCESS = \"SUCCESS\", \r\n\tERROR = \"ERROR\", \r\n\tWARNING = \"WARNING\"\r\n}\r\n\r\n\r\n\r\ninterface NotifyProps{\r\n\tvisible: boolean\r\n\thead: string\r\n\tcontent: string\r\n\ttype: EStatus\r\n\ttimeout?: number\r\n}\r\n\r\nexport const Notification = {\r\n\tsuccess: (head: string, content: NotifyProps['content'], timeout = 2000) => {\r\n\t\tstore.dispatch(Action.notification.show(\"success\", head, content, timeout))\r\n\t},\r\n\terror: (head: string, content: NotifyProps['content'], timeout = 2000) => {\r\n\t\tstore.dispatch(Action.notification.show(\"error\", head, content, timeout))\r\n\t},\r\n\twarning: (head: string, content: NotifyProps['content'], timeout = 2000) => {\r\n\t\tstore.dispatch(Action.notification.show(\"warning\", head, content, timeout))\r\n\t}\r\n}\r\n\r\nconst NotificationContainer: React.FC<NotifyProps> = props => {\r\n\r\n\tprops.visible && setTimeout(() => {\r\n\t\tstore.dispatch(Action.notification.hide())\r\n\t}, props.timeout || 2000)\r\n\r\n\tconst iconSwitcher = (type: string) => {\r\n\t\tswitch(type){\r\n\t\t\tcase \"success\":\r\n\t\t\t\treturn <FaCheckCircle />\r\n\t\t\tcase \"error\":\r\n\t\t\t\treturn <FaExclamationTriangle />\r\n\t\t\tcase \"warning\":\r\n\t\t\t\treturn <FaExclamationCircle />\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t// including BEM methodology\r\n\t\t<div className={`notification notification_${props.type || \"default\"} notification_${props.visible? \"visible\": \"non-visible\"}`}>\r\n\t\t\t<div className=\"notification_content\">\r\n\t\t\t\t<div className=\"notification_content__close\" onClick={() => store.dispatch(Action.notification.hide())}><FaTimes/></div>\r\n\t\t\t\t<span className=\"notification_content__icon\">\r\n\t\t\t\t\t{ iconSwitcher(props.type) }\r\n\t\t\t\t</span>\r\n\t\t\t\t<h2 className=\"notification_content__head\">{props.head}</h2>\r\n\t\t\t\t<p className=\"notification_content__text\">{props.content}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n\r\n\r\nexport default NotificationContainer","import { PayloadAction } from '@reduxjs/toolkit'\r\nimport i18n from '../../i18n';\r\nimport { APP, ELangsInterface } from \"../types\"\r\n\r\ninterface State{\r\n   auth: boolean\r\n   user: {\r\n      name: string,\r\n      login: string,\r\n      balance: number\r\n   }\r\n   lang: ELangsInterface\r\n}\r\n\r\n\r\nconst initialState: State = {\r\n   auth: false,\r\n   user: {\r\n      name: \"\",\r\n      login: \"\",\r\n      balance: 0\r\n   },\r\n   lang: localStorage.getItem(\"i18nextLng\") as ELangsInterface || ELangsInterface.EN\r\n}\r\n\r\nexport const app = (state: State = initialState, action: PayloadAction<any>) => {\r\n   switch(action.type){\r\n      case APP.LOGIN:\r\n         localStorage.setItem(\"token\", action.payload.token)\r\n         return {\r\n            ...state,\r\n            auth: true,\r\n            user: {\r\n               name: action.payload.name,\r\n               login: action.payload.login,\r\n               balance: action.payload.balance\r\n            }\r\n         }\r\n      case APP.LOGOUT:\r\n         localStorage.removeItem(\"token\")\r\n         return {\r\n            ...state,\r\n            auth: false,\r\n            user: {\r\n               name: \"\",\r\n               login: \"\",\r\n               balance: 0\r\n            }\r\n         }\r\n      case APP.ADD_SCORES:\r\n         return {\r\n            ...state,\r\n            user: {\r\n               ...state.user,\r\n               balance: state.user.balance + action.payload\r\n            }\r\n         }\r\n      case APP.CHANGE_LANG:\r\n         i18n.changeLanguage(action.payload)\r\n         localStorage.setItem(\"i18nextLng\", action.payload)\r\n         return {\r\n            ...state,\r\n            lang: action.payload\r\n         }\r\n      default:\r\n         return state\r\n   }\r\n}","import { PayloadAction } from \"@reduxjs/toolkit\"\r\nimport { NOTIFY } from \"../types\"\r\n\r\nconst initialState = {\r\n\tvisible: false,\r\n\ttype: \"\",\r\n\thead: \"\",\r\n\tcontent: \"\",\r\n\ttimeout: 2000\r\n}\r\n\r\nexport const notification = (\r\n\tstate = initialState, \r\n\taction: PayloadAction<{type: string, head: string, content: string, timeout?: number} & number>) => {\r\n\tswitch(action.type){\r\n\t\tcase NOTIFY.SHOW:\r\n\t\t\treturn{\r\n\t\t\t\tvisible: true,\r\n\t\t\t\ttype: action.payload.type,\r\n\t\t\t\thead: action.payload.head,\r\n\t\t\t\tcontent: action.payload.content,\r\n\t\t\t\ttimeout: action.payload.timeout,\r\n\t\t\t}\r\n\t\tcase NOTIFY.HIDE:{\r\n\t\t\treturn{\r\n\t\t\t\t...initialState\r\n\t\t\t}\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","import { POPUP } from \"../types\"\r\n\r\nconst initialState = {\r\n\tvisible: false,\r\n\ttype: 0,\r\n\thead: \"\",\r\n\tcontent: \"\",\r\n\r\n\t// Actions\r\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\r\n\tclose: () => {}\r\n}\r\n\r\nexport const popup = (\r\n\tstate = initialState, \r\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n\taction: any) => {\r\n\tswitch(action.type){\r\n\t\tcase POPUP.SHOW:\r\n\t\t\treturn{\r\n\t\t\t\ttype: action.payload.type,\r\n\t\t\t\tvisible: true,\r\n\t\t\t\thead: action.payload.head,\r\n\t\t\t\tcontent: action.payload.content,\r\n\t\t\t\tclose: action.payload.actions.close,\r\n\t\t\t\tsuccess: action.payload.actions.success\r\n\t\t\t}\r\n\t\tcase POPUP.HIDE:{\r\n\t\t\treturn{\r\n\t\t\t\t...initialState\r\n\t\t\t}\r\n\t\t}\r\n\t\t// case POPUP.SUCCESS: {\r\n\t\t// \treturn {\r\n\r\n\t\t// \t}\r\n\t\t// }\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","import { combineReducers } from 'redux'\r\nimport { app } from \"./app.reducer\"\r\nimport { notification } from \"./notification.reducer\"\r\nimport { popup } from \"./popup.reducer\"\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n\tapp,\r\n\tnotification,\r\n\tpopup\r\n})\r\n \r\nexport default rootReducer","import { createStore, applyMiddleware } from 'redux'\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport rootReducer from './reducers'\r\n// import { PayloadAction } from '@reduxjs/toolkit';\r\n\r\n// This middleware will just add the property \"async dispatch\" to all actions\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n// type MiddlewareFunction = (store: Store) => (next: (a: any) => any) => (action: PayloadAction) => any;\r\n\r\n// const asyncDispatchMiddleware: MiddlewareFunction = store => next => action => {\r\n// \tlet syncActivityFinished = false;\r\n// \tlet actionQueue: PayloadAction[] = [];\r\n\r\n// \tfunction flushQueue() {\r\n// \t\tactionQueue.forEach(a => store.dispatch(a)); // flush queue\r\n// \t\tactionQueue = [];\r\n// \t}\r\n\r\n// \tfunction asyncDispatch(asyncAction: PayloadAction) {\r\n// \t\tactionQueue = actionQueue.concat([asyncAction]);\r\n\r\n// \t\tif (syncActivityFinished)\r\n// \t\t\tflushQueue();\r\n// \t}\r\n\r\n// \tconst actionWithAsyncDispatch = Object.assign({}, action, { asyncDispatch });\r\n\r\n// \tconst res = next(actionWithAsyncDispatch);\r\n\r\n// \tsyncActivityFinished = true;\r\n// \tflushQueue();\r\n\r\n// \treturn res;\r\n// };\r\n\r\nconst composeEnhancers = composeWithDevTools({ \r\n\ttrace: true, \r\n\ttraceLimit: 25 \r\n});\r\n\r\nconst store = createStore(rootReducer, composeEnhancers(\r\n\tapplyMiddleware(thunkMiddleware)\r\n))\r\n\r\n\r\nexport type RootState = ReturnType<typeof store.getState>\r\nexport type AppDispatch = typeof store.dispatch\r\n\r\nexport default store","import React, { MouseEvent, useRef, useState } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { \r\n\tFaLock,\r\n\tFaLockOpen,\r\n\tFaEllipsisV,\r\n\tFaHeart,\r\n\tFaTimes\r\n} from \"react-icons/fa\"\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport Linkify from 'react-linkify'\r\nimport API from '../../api'\r\nimport { ICard } from '../../domains/entities/card.entity'\r\nimport { IDeck } from '../../domains/entities/dek.entity'\r\nimport useOutsideClick from '../../hoc/OutsideClicker'\r\n\r\nimport { Notification } from '../Notification'\r\n\r\nimport \"../../styles/components/deck.scss\"\r\n\r\ntype actionClick = (e: React.FormEvent<HTMLElement>, ...more: any[]) => void\r\n\r\ninterface enableMethodsOptions{\r\n\tenableDelete?: boolean\r\n\tenableEdit?: boolean\r\n\tenableLike?: boolean\r\n\tenableChangePrivate?: boolean\r\n\tenableSubscribe?: boolean\r\n\tenableSave?: boolean\r\n\tenableCreate?: boolean\r\n\tenableClone?: boolean\r\n}\r\n\r\nexport interface IDeckDefault extends IDeck{\r\n\tindex: number\r\n\tenableMethods?: enableMethodsOptions\r\n\t// Actions\r\n\tedit?: actionClick\r\n\tdelete?: actionClick\r\n\tlike?: actionClick\r\n\tchangePrivate?: actionClick\r\n\tsubscribe?: actionClick\r\n\tclone?: actionClick\r\n\twatch?: actionClick\r\n}\r\n\r\n\r\ninterface WatchContainerProps {\r\n\tnameCard: string\r\n\tid: number\r\n\tauthor: string\r\n\tcards: ICard[]\r\n\tvisible: boolean\r\n\tclose: () => void\r\n}\r\n\r\nconst WatchContainer: React.FC<WatchContainerProps> = props => {\r\n\tconst history = useHistory()\r\n\tconst thisRef = useRef<HTMLDivElement>(null)\r\n\tuseOutsideClick(thisRef, () => {\r\n\t\tprops.close()\r\n\t})\r\n\r\n\tif(props.visible) return(\r\n\t\t<div className={`watch_container`}>\r\n\t\t\t<div className=\"watcher\" ref={thisRef}>\r\n\t\t\t\t<div className=\"name_card\">{props.nameCard}</div>\r\n\t\t\t\t<div className=\"author\">by <Link to={`/user/${props.author}`}>{props.author}</Link></div>\r\n\t\t\t\t<div className=\"close\" onClick={() => props.close()}>\r\n\t\t\t\t\t<FaTimes />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"card_item_panel_item_words\">\r\n\t\t\t\t\t<ul className=\"card_item_panel_item_words_ul\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tprops.cards.map((card: ICard, index: number) => {\r\n\t\t\t\t\t\t\t\treturn <li className=\"item\" key={index}>\r\n\t\t\t\t\t\t\t\t\t<span className=\"index\">#{index + 1}. </span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"main_word\">{card.main_word}</span>\r\n\t\t\t\t\t\t\t\t\t-\r\n\t\t\t\t\t\t\t\t\t<span className=\"second_word\">{card.answer}</span>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"btn_wrapper\">\r\n\t\t\t\t\t<button className=\"__btn btn_play\" onClick={() => history.push(`/play/${props.id}`)}>play</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\t)\r\n\telse return null\r\n}\r\n\r\n\r\nexport const Deck: React.FC<IDeckDefault> = props => {\r\n\r\n\tconst history = useHistory()\r\n\t// Component states\r\n\tconst [dropdownVisible, openDropdown] = useState(false)\r\n\tconst [activedLike, activeLike] = useState(props.activeLike || false)\r\n\tconst [subscribed, changeSubscribed] = useState(props.subscribed || false)\r\n\tconst [watched, changeWatched] = useState(false)\r\n\r\n\t// Data states\r\n\tconst [countLikes, changeCountLikes] = useState(props.countLikes || 0)\r\n\tconst [isPrivate, changePrivate] = useState(props.isPrivate || false)\r\n\r\n\tconst dropdownRef = useRef<HTMLUListElement>(null)\r\n\r\n\tuseOutsideClick(dropdownRef, () => {\r\n\t\tif(dropdownVisible) openDropdown(false)\r\n\t})\r\n\r\n\tconst likeUser = (e: MouseEvent<HTMLSpanElement>) => {\r\n\t\tconsole.log(props.enableMethods)\r\n\t\tif(props.enableMethods?.enableLike){\r\n\t\t\tactiveLike(!activedLike)\r\n\t\t\tactivedLike?\r\n\t\t\t\tchangeCountLikes(countLikes - 1):\r\n\t\t\t\tchangeCountLikes(countLikes + 1)\r\n\t\t\tprops.like?.(e, props.id)\r\n\t\t}\r\n\t\telse{\r\n\t\t\tNotification.warning(\"Warning\", \"Please, sign in\", 3000)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleChangePrivate = (e: MouseEvent<HTMLSpanElement>) => {\r\n\t\tif(props.author === props.owner){\r\n\t\t\tprops.changePrivate?.(e, props.id, !isPrivate)\r\n\t\t\tchangePrivate(!isPrivate)\r\n\t\t}\r\n\t}\r\n\tconst handleEdit = (e: MouseEvent<HTMLLIElement>) => {\r\n\t\topenDropdown(false)\r\n\t\tprops.edit?.(e, props.index)\r\n\t}\r\n\tconst handleChangeSubscribed = (e: MouseEvent<HTMLButtonElement>) => {\r\n\t\tprops.subscribe !== undefined && props.subscribe(e, props.id)\r\n\t\tAPI.subscribe(props.id)\r\n\t\t\t.then(resp => {\r\n\t\t\t\tconsole.log(resp);\r\n\t\t\t\tNotification.success(\"!\", \"     \")\r\n\t\t\t})\r\n\t\t\t.catch(err => console.log(err))\r\n\t\tchangeSubscribed(!subscribed)\r\n\t}\r\n\r\n\treturn (\r\n\t<div className=\"card_item card_item_noactive\">\r\n\t\t{\r\n\t\t\twatched && ReactDOM.createPortal(\r\n\t\t\t\t<WatchContainer\r\n\t\t\t\t\tid={props.id}\r\n\t\t\t\t\tauthor={props.author || \"\"}\r\n\t\t\t\t\tnameCard={props.name}\r\n\t\t\t\t\tclose={() => changeWatched(false)} \r\n\t\t\t\t\tvisible={watched} \r\n\t\t\t\t\tcards={props.cards}\r\n\t\t\t\t/>,\r\n\t\t\t\tdocument.getElementById(\"root-modals\") || document.body\r\n\t\t\t)\r\n\t\t}\r\n\t\t{/* control items */}\r\n\t\t\t<div className=\"control\">\r\n\t\t\t\t<span className=\"icon\" onClick={() => openDropdown(!dropdownVisible)}><FaEllipsisV/></span>\r\n\t\t\t\t<ul className={`dropdown ${dropdownVisible ? \"active\": \"noactive\"}`} ref={dropdownRef}>\r\n\t\t\t\t\t<li className=\"dropdown_item\" onClick={() => changeWatched(true)}>Watch</li>\r\n\t\t\t\t\t<li className=\"dropdown_item\" onClick={() => history.push(`/play/${props.id}`)}>Play</li>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprops.enableMethods?.enableEdit && \r\n\t\t\t\t\t\t\t<li className=\"dropdown_item\" onClick={e => handleEdit(e)}>Edit</li>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprops.enableMethods?.enableDelete && \r\n\t\t\t\t\t\t<li className=\"dropdown_item\" onClick={e => props.delete?.(e, props.id)}>Delete</li>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprops.enableMethods?.enableClone && \r\n\t\t\t\t\t\t\t<li className=\"dropdown_item\" onClick={e => props.clone?.(e, props.id)}>Clone</li>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\r\n\t\t{/* HEAD OF DECK */}\r\n\t\t<p className=\"card_item_head\">\r\n\t\t\t{\r\n\t\t\t\t(props.enableMethods !== undefined && props.enableMethods.enableChangePrivate) &&\r\n\t\t\t\t\t<span \r\n\t\t\t\t\t\tstyle={{cursor: props.author === props.owner ? \"pointer\": \"default\"}}\r\n\t\t\t\t\t\tclassName=\"private_lock\" \r\n\t\t\t\t\t\tonClick={e => handleChangePrivate(e)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{isPrivate? <FaLock/>: <FaLockOpen/>}\r\n\t\t\t\t\t</span>\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t<span className=\"card_item_head_name\" onClick={() => history.push(`/play/${props.id}`)}>{props.name}</span>\r\n\t\t\t{\r\n\t\t\t\t// props.author !== props.owner && \r\n\t\t\t\t<Link to={`/user/${props.author}`} className=\"author\">(by {props.author})</Link> \r\n\t\t\t}\r\n\t\t</p>\r\n\r\n\t\t\r\n\t\t<div className=\"middle_layer\">\r\n\t\t\t<div className=\"card_item_head_langs\">\r\n\t\t\t\t<div className=\"lang main_lang\">{props.mainLang}</div>/\r\n\t\t\t\t<div className=\"lang sec_lang\">{props.secondLang}</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"info\">\r\n\t\t\t\t<p className=\"info_count_words\">{props.countWords} words</p>\r\n\t\t\t\t<p className=\"info_count_repetitions\">{props.countRepetitions} repetitions</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<p className=\"card_item_description\"><Linkify>{props.description}</Linkify></p>\r\n\r\n\t\t<div className=\"footer\">\r\n\t\t\t{\r\n\t\t\t\tprops.enableMethods?.enableSubscribe ?\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclassName={`btn btn-${!subscribed? \"primary\": \"danger\"}`} \r\n\t\t\t\t\t\tonClick={e => handleChangeSubscribed(e)}>\r\n\t\t\t\t\t\t\t{subscribed? \"Unsubscribe\": \"Subscribe\"}\r\n\t\t\t\t\t</button>:\r\n\t\t\t\t\t<div></div>\r\n\t\t\t}\r\n\t\t\t<span className=\"likes\" onClick={e => likeUser(e)}>\r\n\t\t\t\t<span className={`heart ${activedLike? \"active\": \"noactive\"}`}><FaHeart/></span>\r\n\t\t\t\t{countLikes}\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t</div>\r\n  );\r\n}","import React, { useRef, useState } from \"react\"\r\nimport useOutsideClick from \"../hoc/OutsideClicker\"\r\n\r\n\r\ninterface EditTextProps{\r\n\ttext: string\r\n\ttypeInput: \"text\" | \"number\"\r\n\tfocus?: boolean\r\n\r\n\tonChanged: (oldValue: string | number, newValue: string | number) => void\r\n}\r\n\r\nexport const EditText: React.FC<EditTextProps> = props => {\r\n\tconst [text, changeText] = useState(props.text)\r\n\tconst [editing, changeEditing] = useState(props.focus || false)\r\n\tconst editTextRef = useRef<HTMLInputElement>(null)\r\n\tconst editTextInputRef = useRef<HTMLInputElement>(null)\r\n\r\n\r\n\r\n\r\n\tconst handleChangeEditing = (open: boolean, newValue?: string | number) => {\r\n\t\tif(open)\r\n\t\t\tchangeEditing(true)\r\n\t\telse{\r\n\t\t\tchangeEditing(false)\r\n\t\t\tprops.text !== newValue && props.onChanged(props.text, newValue || \"\")\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleChangeInput = (e: React.FormEvent<HTMLInputElement>) => {\r\n\t\tchangeText(e.currentTarget.value)\r\n\t}\r\n\r\n\tconst handlePressKeyInput = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n\t\tif(e.key === \"Enter\"){\r\n\t\t\thandleChangeEditing(false, editTextInputRef.current?.value)\r\n\t\t\tchangeEditing(false)\r\n\t\t}\r\n\t}\r\n\r\n\tuseOutsideClick(editTextRef, () => {\r\n\t\tif(editing) {\r\n\t\t\thandleChangeEditing(false, editTextInputRef.current?.value)\r\n\t\t\tchangeEditing(false)\r\n\t\t}\r\n\t})\r\n\r\n\treturn(\r\n\t\t<div className=\"edit_text\" ref={editTextRef}>\r\n\t\t\t{\r\n\t\t\t\tediting ?\r\n\t\t\t\t<input ref={editTextInputRef} type={props.typeInput} value={text} onChange={handleChangeInput} onKeyPress={handlePressKeyInput} autoFocus/>:\r\n\t\t\t\t<span className=\"edit_text_content\" onClick={() => handleChangeEditing(true)}>{text}</span>\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}","import React, { MouseEvent, useRef, useState } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { \r\n\tFaTimes,\r\n\tFaLongArrowAltRight,\r\n\tFaArrowsAltH,\r\n\tFaCaretUp\r\n} from \"react-icons/fa\"\r\n\r\nimport { EditText } from '../EditText'\r\nimport { ActionChange } from '../../domains/entities/actions.entity'\r\nimport { ICard } from '../../domains/entities/card.entity'\r\nimport { IDeck } from '../../domains/entities/dek.entity'\r\nimport useOutsideClick from '../../hoc/OutsideClicker'\r\n\r\nimport { Notification } from '../Notification'\r\n\r\n\r\n// -----------------------------------------------------------------------------\r\n// -------------------------------- Deck ---------------------------------------\r\n// -----------------------------------------------------------------------------\r\n\r\ntype actionClick = (e: React.FormEvent<HTMLElement>, ...more: any[]) => void\r\n\r\ninterface enableMethodsOptions{\r\n\tenableDelete?: boolean\r\n\tenableEdit?: boolean\r\n\tenableLike?: boolean\r\n\tenableChangePrivate?: boolean\r\n\tenableSubscribe?: boolean\r\n\tenableSave?: boolean\r\n\tenableCreate?: boolean\r\n\tenableClone?: boolean\r\n}\r\n\r\nexport interface IDeckDefault extends IDeck{\r\n\tindex: number\r\n\tenableMethods?: enableMethodsOptions\r\n\t// Actions\r\n\tedit?: actionClick\r\n\tdelete?: actionClick\r\n\tlike?: actionClick\r\n\tchangePrivate?: actionClick\r\n\tsubscribe?: actionClick\r\n\tclone?: actionClick\r\n\twatch?: actionClick\r\n}\r\n\r\ninterface EditedCardProps extends ICard{\r\n\tvisible: boolean\r\n\tpositionElement: {x: number, y: number}\r\n\r\n\teventOnChangeMainWord?: (value: string) => void\r\n\teventOnChangeSecondWord?: (e: React.FormEvent<HTMLInputElement>) => void\r\n\teventOnChangeDescriptionCard?: (e: React.FormEvent<HTMLTextAreaElement>) => void\r\n\r\n\tclose: (e: React.FormEvent<HTMLElement> | null) => void\r\n\tsave: (changes: ActionChange[], idCard: number) => void\r\n}\r\n\r\n\r\nconst EditedCard: React.FC<EditedCardProps> = props => {\r\n\tconst [mainWordChanged, setMainWordChanged] = useState(false)\r\n\tconst [answerChanged, setAnswerChanged] = useState(false)\r\n\tconst [descriptionChanged, setDescriptionChanged] = useState(false)\r\n\tconst [mainWord, changeMainWord] = useState(props.main_word)\r\n\tconst [answer, changeAnswer] = useState(props.answer)\r\n\tconst [description, changeDescription] = useState(props.description)\r\n\r\n\tconst thisRef = useRef<HTMLDivElement>(null)\r\n\r\n\tconst handleChangeMainWord = (e: React.FormEvent<HTMLInputElement>) => {\r\n\t\tprops.eventOnChangeMainWord?.(e.currentTarget.value)\r\n\t\tchangeMainWord(e.currentTarget.value)\r\n\t\tsetMainWordChanged(true)\r\n\t}\r\n\r\n\tconst handleChangeAnswer = (e: React.FormEvent<HTMLInputElement>) => {\r\n\t\tprops.eventOnChangeSecondWord?.(e)\r\n\t\tchangeAnswer(e.currentTarget.value)\r\n\t\tsetAnswerChanged(true)\r\n\t}\r\n\r\n\tconst handleChangeDescription = (e: React.FormEvent<HTMLTextAreaElement>) => {\r\n\t\tprops.eventOnChangeDescriptionCard?.(e)\r\n\t\tchangeDescription(e.currentTarget.value)\r\n\t\tsetDescriptionChanged(true)\r\n\t}\r\n\r\n\tconst handleSaveChanges = () => {\r\n\t\tlet __changes: ActionChange[] = []\r\n\t\tif(mainWordChanged)\r\n\t\t\t__changes  = [...__changes, {\r\n\t\t\t\ttype: \"CHANGE_CARD\",\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tname: \"main_word\",\r\n\t\t\t\t\tid: props.id,\r\n\t\t\t\t\tvalue: mainWord\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\tif(answerChanged)\r\n\t\t\t__changes  = [...__changes, {\r\n\t\t\t\ttype: \"CHANGE_CARD\",\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tname: \"answer\",\r\n\t\t\t\t\tid: props.id,\r\n\t\t\t\t\tvalue: answer\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\tif(descriptionChanged)\r\n\t\t\t__changes  = [...__changes, {\r\n\t\t\t\ttype: \"CHANGE_CARD\",\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tname: \"description\",\r\n\t\t\t\t\tid: props.id,\r\n\t\t\t\t\tvalue: description\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\tconsole.log(__changes);\r\n\t\tprops.save(__changes, props.id)\r\n\t\tprops.close(null)\r\n\t}\r\n\r\n\tuseOutsideClick(thisRef, () => {\r\n\t\tif(props.visible) props.close(null)\r\n\t})\r\n\r\n\treturn (\r\n\t\tReactDOM.createPortal(\r\n\t\t\t<div ref={thisRef} className=\"editedCardWatch\" style={{display: props.visible? \"block\": \"none\", top: props.positionElement.y + 240, left: props.positionElement.x - 20}}>\r\n\t\t\t\t<div className=\"wrapper\">\r\n\t\t\t\t\t<div className=\"beforeTringle\">\r\n\t\t\t\t\t\t<FaCaretUp />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"closeEditedCard\" onClick={e => props.close(e)}>\r\n\t\t\t\t\t\t<FaTimes />\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"control-top\">\r\n\t\t\t\t\t\t<input type=\"text\" className=\"__input __input_default\" value={mainWord} onChange={e => handleChangeMainWord(e)}/>\r\n\t\t\t\t\t\t<FaLongArrowAltRight />\r\n\t\t\t\t\t\t<input type=\"text\" className=\"__input __input_default\" value={answer} onChange={e => handleChangeAnswer(e)}/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<textarea name=\"description\" className=\"__input __input_default\" id=\"\" cols={10} rows={2} value={description} onChange={e => handleChangeDescription(e)}></textarea>\r\n\t\t\t\t\t<button className=\"__btn\" onClick={handleSaveChanges}>save</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>,\r\n\t\t\tdocument.getElementById(\"root\") || document.body\r\n\t\t)\r\n\t)\r\n}\r\n\r\n\r\n\r\nexport interface IDeckActive extends IDeckDefault{\r\n\tclose: actionClick\r\n\tsave?: actionClick\r\n\tcreate?: actionClick\r\n}\r\n\r\n\r\nexport const DeckActive: React.FC<IDeckActive> = props => {\r\n\tconst [cards, changeCards] = useState(props.cards)\r\n\tconst [countCards, incCountCards] = useState(props.countWords)\r\n\tconst [changes, addChange] = useState([] as ActionChange[])\r\n\tconst [name, changeName] = useState(props.name)\r\n\tconst [mainWordValue, changeMainWordValue] = useState(\"\")\r\n\tconst [secondWordValue, changeSecondWordValue] = useState(\"\")\r\n\tconst [descriptionCard, changeDescriptionCard] = useState(\"\")\r\n\tconst [indexCard, changeIndexCard] = useState(1)\r\n\r\n\tconsole.log(changes);\r\n\t// Edited card menu\r\n\tconst [currentCardOpened, changeCurrentCardOpened] = useState(cards[0])\r\n\tconst [visibleCardWatch, changeVisibleCardWatch] = useState(false)\r\n\tconst [positionCard, changePositionCard] = useState({x: 0, y: 0})\r\n\r\n\tconst [mainLang, changeMainLang] = useState(\"ENG\")\r\n\tconst [secondLang, changeSecondLang] = useState(\"RU\")\r\n\t// const [isPrivate, changeName] = useState(props.name || \"Deck name\")\r\n\r\n\tconst mainWordRef = useRef<HTMLInputElement>(null)\r\n\tconst secondWordRef = useRef<HTMLInputElement>(null)\r\n\tconst descriptionDeckRef = useRef<HTMLTextAreaElement>(null)\r\n\tconst descriptionCardRef = useRef<HTMLTextAreaElement>(null)\r\n\r\n\tconst LANGS = [\r\n\t\t\"RUS\",\r\n\t\t\"ENG\",\r\n\t\t\"JPN\",\r\n\t\t\"CHI\",\r\n\t\t\"ITA\",\r\n\t\t\"SPA\",\r\n\t\t\"FRA\",\r\n\t\t\"GER\"\r\n\t]\r\n\r\n\r\n\tconst handleChangeName = (newValue: string) => {\r\n\t\tchangeName(newValue)\r\n\t\tconst payloadChangeName = {\r\n\t\t\tname: \"name\",\r\n\t\t\tvalue: newValue\r\n\t\t}\r\n\t\taddChange(oldChanges => {\r\n\t\t\treturn [...oldChanges, {\r\n\t\t\t\ttype: \"CHANGE_DECK\",\r\n\t\t\t\tpayload: payloadChangeName\r\n\t\t\t}]\r\n\t\t})\r\n\t}\r\n\r\n\tconst handleAddCard = () => {\r\n\t\tconst newCard: ICard = {\r\n\t\t\tid: (cards[cards.length - 1] || {id: -1}).id + 1,\r\n\t\t\tmain_word: mainWordValue,\r\n\t\t\tanswer: secondWordValue,\r\n\t\t\ttype: \"default\",\r\n\t\t\tdescription: descriptionCard\r\n\t\t}\r\n\t\tchangeCards(oldCards => [...oldCards, newCard])\r\n\t\tincCountCards(countCardsOld => countCardsOld + 1)\r\n\t\taddChange(oldChanges => {\r\n\t\t\treturn [...oldChanges, {\r\n\t\t\t\ttype: \"NEW_CARD\",\r\n\t\t\t\tpayload: newCard\r\n\t\t\t}]\r\n\t\t})\r\n\r\n\t\tchangeMainWordValue(\"\")\r\n\t\tchangeSecondWordValue(\"\")\r\n\t\tchangeDescriptionCard(\"\")\r\n\t\tchangeIndexCard(indexCard + 1)\r\n\t\t// mainWordRef.current?.value = \"\"\r\n\t}\r\n\r\n\tconst handleChangeMainWord__press = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n\t\tif(e.key === \"Enter\")\r\n\t\t\thandleAddCard()\r\n\t}\r\n\t\r\n\tconst handleChangeSecondWord__press = (e: React.KeyboardEvent<HTMLInputElement>) => { if(e.key === \"Enter\")handleAddCard() }\r\n\r\n\tconst handleChangeDescriptionCard__press = (e: React.KeyboardEvent<HTMLTextAreaElement>) => { if(e.key === \"Enter\") handleAddCard() }\r\n\r\n\tconst handleChangeMainWord = (e: React.FormEvent<HTMLInputElement>) => { changeMainWordValue(e.currentTarget.value) }\r\n\t\r\n\tconst handleChangeSecondWord = (e: React.FormEvent<HTMLInputElement>) => { changeSecondWordValue(e.currentTarget.value) }\r\n\r\n\tconst handleChangeDescriptionCard = (e: React.FormEvent<HTMLTextAreaElement>) => { changeDescriptionCard(e.currentTarget.value) }\r\n\r\n\tconst handleChangeMainLang = (e: React.FormEvent<HTMLSelectElement>) => { changeMainLang(e.currentTarget.value) }\r\n\r\n\tconst handleChangeSecondLang = (e: React.FormEvent<HTMLSelectElement>) => { changeSecondLang(e.currentTarget.value) }\r\n\r\n\tconst handleChangeMainWordInConsistCard = (value: string, id: number) => {\r\n\t\tchangeCards((oldCards) => {\r\n\t\t\tconst __cards = oldCards.map(item => {\r\n\t\t\t\tif(item.id === id)\r\n\t\t\t\t\titem.main_word = value\r\n\t\t\t\treturn item\r\n\t\t\t})\r\n\t\t\tconsole.log(oldCards, value, id);\r\n\t\t\treturn __cards\r\n\t\t})\r\n\t}\r\n\r\n\tconst handleSwapLangs = () => {\r\n\t\tconst __mainLang = mainLang\r\n\t\tchangeMainLang(secondLang)\r\n\t\tchangeSecondLang(__mainLang)\r\n\t}\r\n\r\n\t// For creating\r\n\tconst handleCreateDeck = (e: MouseEvent<HTMLButtonElement>) => {\r\n\t\tconst dataNewDeck: Partial<IDeck & {description: string, price: number}> = {\r\n\t\t\tname,\r\n\t\t\tisPrivate: false,\r\n\t\t\tdescription: descriptionDeckRef.current?.value,\r\n\t\t\tmainLang: mainLang,\r\n\t\t\tsecondLang: secondLang,\r\n\t\t\tprice: 0,\r\n\t\t\tcards: cards\r\n\t\t}\r\n\t\tcards.length !== 0 ? \r\n\t\t\tprops.create?.(e, dataNewDeck):\r\n\t\t\tNotification.warning(\"!\", \"     !\", 2500)\r\n\t}\r\n\r\n\tconst handleDeleteCard = (e: MouseEvent<HTMLDivElement>, index: number) => {\r\n\t\te.stopPropagation()\r\n\t\tchangeVisibleCardWatch(false)\r\n\t\tchangeCards(oldCards => oldCards.filter((_, _index: number) => _index !== index))\r\n\t\taddChange(changes => [...changes, {\r\n\t\t\ttype: \"DELETE_CARD\",\r\n\t\t\tpayload: {\r\n\t\t\t\tid: cards[index].id\r\n\t\t\t}\r\n\t\t}])\r\n\t}\r\n\t\r\n\tconst handleOpenCardForWatch = (e: MouseEvent<HTMLLIElement>, index: number) => {\r\n\t\tchangePositionCard({x: e.currentTarget.offsetLeft, y: e.currentTarget.offsetTop})\r\n\t\tchangeCurrentCardOpened(cards[index])\r\n\t\tchangeVisibleCardWatch(true)\r\n\t}\r\n\r\n\tconst handleChangeCard = (changesCard: ActionChange[]) => {\r\n\t\tconsole.log(changesCard);\r\n\t\taddChange((old) => [...old, ...changesCard])\r\n\t} \r\n\t// -----------------------------------------------------------------------------\r\n\t// ---------------------------- Export JSON -----------------------------------\r\n\t// -----------------------------------------------------------------------------\r\n\r\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n\tconst handleExportFileAsJSON = (e: React.FormEvent<HTMLInputElement>) => {\r\n\t\tconst files = e.currentTarget.files || []\r\n\t\tconst file = files[0]\r\n\t\tconst reader = new FileReader()\r\n\r\n\t\treader.onload = function() {\r\n\t\t\tconst data = JSON.parse(reader.result as string)\r\n\t\t\tuploadJSONToCards(data.decks)\r\n\t\t}\r\n\r\n\t\treader.readAsText(file);\r\n\t}\r\n\r\n\tconst uploadJSONToCards = (cards: ICard[]) => {\r\n\t\tcards.map((card, index) => {\r\n\t\t\tif(index >= 20 && index < 40){\r\n\t\t\t\tconst newCard: ICard = {\r\n\t\t\t\t\tid: card.id,\r\n\t\t\t\t\tmain_word: card.main_word,\r\n\t\t\t\t\tanswer: card.answer,\r\n\t\t\t\t\ttype: \"default\",\r\n\t\t\t\t\tdescription: \"\"\r\n\t\t\t\t}\r\n\t\t\t\tchangeCards(oldCards => [...oldCards, newCard])\r\n\t\t\t\tincCountCards(countCardsOld => countCardsOld + 1)\r\n\t\t\t\taddChange(oldChanges => {\r\n\t\t\t\t\treturn [...oldChanges, {\r\n\t\t\t\t\t\ttype: \"NEW_CARD\",\r\n\t\t\t\t\t\tpayload: newCard\r\n\t\t\t\t\t}]\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t}\r\n\t\r\n\r\n\treturn (\r\n\t\t<div className=\"card_item card_item_active\">\r\n\t\t\t<div className=\"close\" onClick={props.close}>\r\n\t\t\t\t<FaTimes />\r\n\t\t\t</div>\r\n\r\n\r\n\t\t\t<p className=\"card_item_name\">\r\n\t\t\t\t<EditText text={name} typeInput=\"text\" focus onChanged={(old, _new) => handleChangeName(_new as string)}/>\r\n\t\t\t</p>\r\n\t\t\t<div className=\"top-panel\">\r\n\t\t\t\t<div className=\"select_languages\">\r\n\t\t\t\t\t<select onChange={handleChangeMainLang} className=\"form-select\" aria-label=\"Default select example\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tLANGS.map((lang, index) => {\r\n\t\t\t\t\t\t\t\treturn <option key={index} selected={lang === mainLang}>{lang}</option>\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</select>\r\n\r\n\r\n\t\t\t\t\t<span className=\"card_item_panel_toggler\" onClick={handleSwapLangs}><FaArrowsAltH /></span>\r\n\r\n\t\t\t\t\t<select onChange={handleChangeSecondLang} className=\"form-select\" aria-label=\"Default select example\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tLANGS.map((lang, index) => {\r\n\t\t\t\t\t\t\t\treturn <option key={index} selected={lang === secondLang}>{lang}</option>\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</select>\r\n\r\n\t\t\t\t\t{/* <input type=\"file\" onChange={handleExportFileAsJSON}/> */}\r\n\t\t\t\t</div>\r\n\t\t\t\t{/* PLUG for jcsb */}\r\n\t\t\t\t<div></div>\r\n\t\t\t</div>\r\n\r\n\r\n\t\t\t<div className=\"info\">\r\n\t\t\t\t<span className=\"card_item_count_words\">{countCards} words</span>\r\n\t\t\t\t<p className=\"card_item_count_repetitions\">{props.countRepetitions} repetitions</p>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"description_deck__wrapper\">\r\n\t\t\t\t<textarea \r\n\t\t\t\t\tdefaultValue={props.description || \"\"} \r\n\t\t\t\t\tref={descriptionDeckRef} \r\n\t\t\t\t\tplaceholder=\"Type description deck\" \r\n\t\t\t\t\tname=\"\" \r\n\t\t\t\t\tid=\"\" \r\n\t\t\t\t\tcols={60} \r\n\t\t\t\t\trows={10}>\r\n\t\t\t\t</textarea>\r\n\t\t\t</div>\r\n\r\n\r\n\t\t\t<div className=\"card_item_panel_adding__wrapper\">\r\n\t\t\t\t<div className=\"card_item_panel_adding\">\r\n\t\t\t\t\t<span className=\"index_card\">\r\n\t\t\t\t\t\t#{indexCard}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<div className=\"main-answer-words\">\r\n\t\t\t\t\t\t<div className=\"input-wrapper form-floating\">\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\tonKeyPress={handleChangeMainWord__press} \r\n\t\t\t\t\t\t\t\tonChange={handleChangeMainWord}\r\n\t\t\t\t\t\t\t\tvalue={mainWordValue} \r\n\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\tclassName=\"form-control\" \r\n\t\t\t\t\t\t\t\tid=\"floatingInput\" \r\n\t\t\t\t\t\t\t\tplaceholder=\"type word...\" \r\n\t\t\t\t\t\t\t\tref={mainWordRef}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<label htmlFor=\"floatingInput\">Main word on {mainLang}</label>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<span className=\"card_item_panel_toggler\" onClick={handleSwapLangs}><FaLongArrowAltRight /></span>\r\n\r\n\t\t\t\t\t\t<div className=\"input-wrapper form-floating\">\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\tonKeyPress={handleChangeSecondWord__press} \r\n\t\t\t\t\t\t\t\tonChange={handleChangeSecondWord} \r\n\t\t\t\t\t\t\t\tvalue={secondWordValue} \r\n\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\tclassName=\"form-control\" \r\n\t\t\t\t\t\t\t\tid=\"floatingInput\" \r\n\t\t\t\t\t\t\t\tplaceholder=\"type word...\" \r\n\t\t\t\t\t\t\t\tref={secondWordRef}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<label htmlFor=\"floatingInput\">Second word {secondLang}</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"control_bottom__wrapper\">\r\n\t\t\t\t\t\t<textarea \r\n\t\t\t\t\t\t\tref={descriptionCardRef} \r\n\t\t\t\t\t\t\tvalue={descriptionCard} \r\n\t\t\t\t\t\t\tonKeyPress={handleChangeDescriptionCard__press} \r\n\t\t\t\t\t\t\tonChange={handleChangeDescriptionCard} \r\n\t\t\t\t\t\t\tplaceholder=\"Type description\" \r\n\t\t\t\t\t\t\tname=\"\" \r\n\t\t\t\t\t\t\tid=\"\" \r\n\t\t\t\t\t\t\tcols={60} \r\n\t\t\t\t\t\t\trows={10}>\r\n\t\t\t\t\t\t</textarea>\r\n\t\t\t\t\t\t<button  className=\"card_item_panel_button_add\" onClick={handleAddCard}>add</button>\r\n\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t{\r\n\t\t\t\tvisibleCardWatch && <EditedCard \r\n\t\t\t\t\tvisible={visibleCardWatch}\r\n\t\t\t\t\tid={currentCardOpened?.id}\r\n\t\t\t\t\tmain_word={currentCardOpened?.main_word}\r\n\t\t\t\t\tanswer={currentCardOpened?.answer}\r\n\t\t\t\t\tdescription={currentCardOpened?.description}\r\n\t\t\t\t\ttype=\"default\"\r\n\t\t\t\t\tpositionElement={positionCard}\r\n\r\n\t\t\t\t\teventOnChangeMainWord={e => handleChangeMainWordInConsistCard(e, currentCardOpened?.id)}\r\n\r\n\t\t\t\t\tclose={() => changeVisibleCardWatch(false)}\r\n\t\t\t\t\tsave={handleChangeCard}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\r\n\t\t\t<div className=\"card_item_panel_item_words\">\r\n\t\t\t\t<ul className=\"card_item_panel_item_words_ul\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcards.map((card: ICard, index: number) => {\r\n\t\t\t\t\t\t\treturn <li key={index} className=\"item\" onClick={e => handleOpenCardForWatch(e, index)}>\r\n\t\t\t\t\t\t\t\t<span className=\"index\">#{index + 1}. </span>\r\n\t\t\t\t\t\t\t\t<span className=\"main_word\">{card.main_word}</span>\r\n\t\t\t\t\t\t\t\t-\r\n\t\t\t\t\t\t\t\t<span className=\"second_word\">{card.answer}</span>\r\n\t\t\t\t\t\t\t\t<div className=\"close_deck\" onClick={e => handleDeleteCard(e, index)}><FaTimes/></div>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t\r\n\r\n\r\n\t\t\t<div className=\"buttons_group\">\r\n\t\t\t\t{\r\n\t\t\t\t\tprops.enableMethods?.enableCreate && \r\n\t\t\t\t\t<button className=\"__btn __button-default button-create\" onClick={handleCreateDeck}>create</button>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\tprops.enableMethods?.enableSave && \r\n\t\t\t\t\t\t<button className=\"__btn __button-default button-save mr-5\" onClick={e => props.save?.(e, props.id, changes)}>save</button>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\tprops.enableMethods?.enableDelete &&\r\n\t\t\t\t\t\t<button className=\"__btn __button-default button-delete\" onClick={e => props.delete?.(e, props.id)}>delete</button>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}","import React from 'react'\r\nimport { \r\n\tFaPlus\r\n} from \"react-icons/fa\"\r\n\r\ntype actionClick = (e: React.FormEvent<HTMLElement>, ...more: any[]) => void\r\n\r\n\r\ninterface IDeckAdd{\r\n\tadd: actionClick\r\n}\r\n\r\nexport const DeckAdd: React.FC<IDeckAdd> = props => {\r\n\treturn(\r\n\t\t<div className=\"card_item card_item_noactive new_card\">\r\n\t\t\t<div className=\"svg_wrapper\" onClick={e => props.add(e)}>\r\n\t\t\t\t<FaPlus />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}","import React from 'react';\r\n\r\nimport \"../styles/components.scss\"\r\n\r\n\r\ninterface IProps{\r\n\tinfo: Record<string, string | number>\r\n\tclassName?: string\r\n}\r\n\r\n\r\nconst Currsection: React.FC<IProps> = ({info, className}) => {\r\n  return (\r\n\t<section className={`currsection ${className || \"\"}`}>\r\n\t\t\t{\r\n\t\t\t\tObject.keys(info).map((key: string, index: number) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<p className=\"currsection__item\" key={index}>\r\n\t\t\t\t\t\t\t<span className=\"currsection__item_key\">\r\n\t\t\t\t\t\t\t\t{key}:\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<span className=\"currsection__item_value\">\r\n\t\t\t\t\t\t\t\t{Object.values(info)[index]}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t</section>\r\n  );\r\n}\r\n\r\nexport default Currsection;\r\n","import Header from \"./Header\"\r\nimport { Deck } from \"./Deck\"\r\nimport Currsection from \"./Currsection\"\r\nimport Notification from \"./Notification\"\r\n\r\nconst Components = {\r\n\tHeader,\r\n\tDeck,\r\n\tCurrsection,\r\n\tNotification\r\n}\r\n\r\nconst loader = document.querySelector('.loader__wrapper') || document.body;\r\n\r\n// if you want to show the loader when React loads data again\r\nexport const showLoader = () => {\r\n\tloader.classList.remove('loader__wrapper--hide')\r\n\t// document.body.style.overflowY = \"hidden\"\r\n};\r\n\r\nexport const hideLoader = () => {\r\n\tloader.classList.add('loader__wrapper--hide')\r\n\t// document.body.style.overflowY = \"scroll\"\r\n}\r\n\r\n\r\nexport default Components","interface PropsConfirm{\r\n\tsuccess: (successed: boolean) => void\r\n}\r\n\r\nconst Confirm = (props: PropsConfirm) => {\r\n\treturn(\r\n\t\t<div className=\"Popup_confirm\">\r\n\t\t\t{/* ...omit from parent container */}\r\n\t\t\t<button className=\"btn btn-danger\" onClick={() => props.success(false)}>Cancel</button>\r\n\t\t\t<button className=\"btn btn-primary\" onClick={() => props.success(true)}>Accept</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Confirm","import React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport { FaTimes } from \"react-icons/fa\"\r\nimport { connect, ConnectedProps } from \"react-redux\"\r\nimport { Dispatch } from \"redux\"\r\nimport Actions from \"../../redux/actions\"\r\nimport store from \"../../redux/store\"\r\nimport { POPUP_TYPES } from \"../../redux/types\"\r\n\r\n// MODALS\r\nimport Confirm from \"./Confirm\"\r\n\r\n\r\ninterface StatePopup{\r\n\tvisible: boolean\r\n}\r\n// const mapStateToProps = (state: any) => ({\r\n// \tpopupProps: state.popup\r\n// })\r\n\r\nconst mapDispatchToProps = (f: Dispatch) => ({\r\n\thide: () => f(Actions.popup.hide())\r\n})\r\n\r\nconst connector = connect(null, mapDispatchToProps)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>\r\n\r\ninterface PropsPopup extends PropsFromRedux{\r\n\tvisible: boolean\r\n\ttype: POPUP_TYPES\r\n\thead: string\r\n\tcontent: string\r\n\r\n\t// actions\r\n\tclose: () => void\r\n\tsuccess?: (successed: boolean) => void\r\n}\r\n\r\nclass ModalContainer extends React.PureComponent<PropsPopup, StatePopup>{\r\n\tconstructor(props: PropsPopup){\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tvisible: this.props.visible || false\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\t// Methods callback\r\n\tclose(){\r\n\t\tthis.props.hide()\r\n\t\tthis.props.close()\r\n\t}\r\n\r\n\tsuccess(successed: boolean){\r\n\t\tthis.props.success?.(successed)\r\n\t\tthis.props.hide()\r\n\t\tthis.props.close()\r\n\t}\r\n\r\n\tswitchModals(type: POPUP_TYPES){\r\n\t\tswitch(type){\r\n\t\t\tcase POPUP_TYPES.CONFIRM:\r\n\t\t\t\treturn <Confirm success={this.success.bind(this)}/>\r\n\t\t\tdefault:\r\n\t\t\t\treturn <></>\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn(\r\n\t\t\tReactDOM.createPortal(\r\n\t\t\t\t<div className={`Popup__wrapper ${this.props.visible? \"active\": \"noactive\"}`}>\r\n\t\t\t\t\t<div className=\"Popup\">\r\n\t\t\t\t\t\t<div className=\"control_top\">\r\n\t\t\t\t\t\t\t<span className=\"close_button\" onClick={this.close.bind(this)}>\r\n\t\t\t\t\t\t\t\t<FaTimes />\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"head\">\r\n\t\t\t\t\t\t\t<span>{this.props.head}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t\t\t<span>{this.props.content}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"control_botton\">\r\n\t\t\t\t\t\t\t{this.switchModals(this.props.type)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t\t,\r\n\t\t\t\tdocument.getElementById(\"root-modals\") || document.body\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport const Modal = {\r\n\tconfirm: (head: string, content: string, close: () => void, success: (s: boolean) => void) =>\r\n\t\tstore.dispatch(Actions.popup.show(POPUP_TYPES.CONFIRM, head, content, {close, success}))\r\n}\r\n\r\n\r\nexport default connector(ModalContainer)","import React from \"react\"\r\nimport { FaChevronLeft, FaChevronRight } from \"react-icons/fa\"\r\nimport ReactPaginate from \"react-paginate\"\r\n\r\nimport \"../styles/components/pagination.scss\"\r\n\r\ninterface PaginationProps{\r\n\t// values props\r\n\tcountPages: number\r\n\r\n\t// action props\r\n\tchangeCountPages: () => void\r\n\tchangeCurrentPage: (selectedItem: { selected: number }) => void\r\n}\r\n\r\nconst Pagination: React.FC<PaginationProps> = props => {\r\n\treturn (\r\n\t\t<div className=\"pagination\">\r\n\t\t\t<ReactPaginate\r\n\t\t\t\tpreviousLabel={<FaChevronLeft />}\r\n\t\t\t\tnextLabel={<FaChevronRight />}\r\n\t\t\t\tbreakLabel={'...'}\r\n\t\t\t\tbreakClassName={'break-me'}\r\n\t\t\t\tpageCount={props.countPages}\r\n\t\t\t\tmarginPagesDisplayed={2}\r\n\t\t\t\tpageRangeDisplayed={5}\r\n\t\t\t\tonPageChange={props.changeCurrentPage}\r\n\t\t\t\tcontainerClassName={'pagination_pages_buttons'}\r\n\t\t\t\tactiveClassName={'active'}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Pagination","import React from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\n\r\nimport API from \"../api\"\r\nimport { showLoader, hideLoader } from \"../components\"\r\n\r\n\r\n// Components and redux instances\r\nimport {\r\n\tDeck, \r\n\tDeckActive, \r\n\tDeckAdd,\r\n\tIDeckDefault\r\n} from \"../components/Deck/index\"\r\nimport { Notification } from '../components/Notification';\r\nimport { Modal } from '../components/modals';\r\n\r\nimport { ActionChange } from '../domains/entities/actions.entity';\r\n\r\n// App styles\r\nimport \"../styles/pages/Decks.scss\"\r\nimport { RootState } from '../redux/store';\r\nimport { WithTranslation, withTranslation } from 'react-i18next';\r\nimport Pagination from '../components/Pagination';\r\nimport { RouteComponentProps } from 'react-router-dom';\r\n\r\ninterface IDecksProps extends WithTranslation, RouteComponentProps{\r\n\tinit?: boolean\r\n\ttextHello?: string\r\n}\r\n\r\ninterface StateDecks{\r\n\tdecksSubscriptions: IDeckDefault[]\r\n\tdecksOwned: IDeckDefault[]\r\n\tisNewDeck: boolean\r\n\tisEdit: boolean\r\n\tdeckEdit: IDeckDefault | null\r\n\r\n\t// for pagination\r\n\tcountOwnedPages: number\r\n\tcountSubsPages: number\r\n\tcurrentOwnedPage: number\r\n\tcurrentSubsPage: number\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\tuser: state.app.user\r\n})\r\nconst connector = connect(mapStateToProps)\r\n\r\ntype PropsFromRedux = IDecksProps & ConnectedProps<typeof connector>\r\n\r\n\r\nclass Decks extends React.Component<PropsFromRedux, StateDecks>{\r\n\tpublic state: StateDecks = {\r\n\t\tdecksSubscriptions: [],\r\n\t\tdecksOwned: [],\r\n\r\n\t\tisNewDeck: false,\r\n\t\tisEdit: false,\r\n\t\tdeckEdit: null,\r\n\t\tcountOwnedPages: 1,\r\n\t\tcountSubsPages: 1,\r\n\t\tcurrentOwnedPage: 1,\r\n\t\tcurrentSubsPage: 1,\r\n\t}\r\n\r\n\tconstructor(props: PropsFromRedux){\r\n\t\tsuper(props)\r\n\t\tshowLoader()\r\n\t}\r\n\r\n\taddDeck(){\r\n\t\tthis.setState({\r\n\t\t\tisNewDeck: true\r\n\t\t})\r\n\t}\r\n\r\n\tsaveDeck(_e: React.FormEvent<HTMLElement>, id: number, changes: ActionChange[]){\r\n\t\tAPI.applyChanges(id, changes)\r\n\t\t\t.then(response => {\r\n\t\t\t\tconsole.log(response)\r\n\t\t\t\tthis.setState({ isEdit: false })\r\n\t\t\t})\r\n\t\t\t.catch(err => console.log(err))\r\n\t}\r\n\r\n\teditDeck(_e: React.FormEvent<HTMLElement>, index: number){\r\n\t\tconsole.log(\"edit\", index);\r\n\t\tthis.setState({\r\n\t\t\tisEdit: true,\r\n\t\t\tdeckEdit: this.state.decksOwned[index]\r\n\t\t})\r\n\t}\r\n\r\n\tdeleteDeck(_e: React.FormEvent<HTMLElement>, id: number){\r\n\t\tModal.confirm(\r\n\t\t\t\"    ?\", \r\n\t\t\t\"   ,    ,  ,    ?\",\r\n\t\t\t() => console.log(),\r\n\t\t\t(accept) => {\r\n\t\t\t\tif(accept){\r\n\t\t\t\t\tAPI.deleteDeck(id)\r\n\t\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\t\t\tif(!response.data.error){\r\n\t\t\t\t\t\t\t\tthis.setState({ decksOwned: this.state.decksOwned.filter(deck => deck.id !== id) })\r\n\t\t\t\t\t\t\t\tNotification.success(\"OK\", \"  \", 3000)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t\tNotification.error(\"\", \"   \", 3000)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t// Notification.success(\"Hello!\", \"Content\", 3000)\r\n\t}\r\n\r\n\tlike(_e: unknown, id: number){\r\n\t\tAPI.setLike(id)\r\n\t\t\t.then(res => console.log(res))\r\n\t\t\t.catch(err => console.log(err))\r\n\t\tconsole.log(\"like\", id);\r\n\t}\r\n\r\n\tchangePrivate(_e: unknown, id: number, valuePrivate: boolean){\r\n\t\tAPI.applyChanges(id, [\r\n\t\t\t{\r\n\t\t\t\ttype: \"CHANGE_DECK\",\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tname: \"isPrivate\",\r\n\t\t\t\t\tvalue: Number(valuePrivate)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t])\r\n\t\t\t.then(resp => console.log(resp))\r\n\t\t\t.catch(err => console.log(err))\r\n\t}\r\n\r\n\tcreateNewDeck(_e: unknown, data: any){\r\n\t\tAPI.addDeck(data)\r\n\t\t\t.then(response => {\r\n\t\t\t\tconsole.log(response)\r\n\t\t\t\tthis.setState({ isNewDeck: false, decksOwned: [...this.state.decksOwned, {...data}] })\r\n\t\t\t})\r\n\t\t\t.catch(err => console.log(err))\r\n\t}\r\n\r\n\thandleUnsibscribe(_e: React.FormEvent<HTMLElement>, id: number){\r\n\t\tthis.setState({ decksSubscriptions: this.state.decksSubscriptions.filter(deck => deck.id !== id) })\r\n\t}\r\n\r\n\thandleCloseActiveAddingDeck(){\r\n\t\tthis.setState({ isNewDeck: false })\r\n\t}\r\n\r\n\thandleCloseActiveEditingDeck(){\r\n\t\tthis.setState({ isEdit: false })\r\n\t}\r\n\r\n\thandleChangeCurrentOwnedPage(choosen: { selected: number }){\r\n\t\tthis.setState({ currentOwnedPage: choosen.selected + 1 })\r\n\t\tthis.updateDecks( choosen.selected + 1, this.state.currentSubsPage )\r\n\t}\r\n\r\n\thandleChangeCurrentSubsPage(choosen: { selected: number }){\r\n\t\tthis.setState({ currentSubsPage: choosen.selected + 1 })\r\n\t\tthis.updateDecks( this.state.currentOwnedPage, choosen.selected + 1 )\r\n\t}\r\n\r\n\tupdateDecks(ownedPage: number, subsPage: number){\r\n\t\t// if(this.state.decksOwned.length === 0){\r\n\t\t\tAPI.getDecks(ownedPage, subsPage)\r\n\t\t\t\t// .then(data => console.log(data))\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\tif(!data.error)\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tdecksSubscriptions: data.data.subscriptions,\r\n\t\t\t\t\t\t\tdecksOwned: data.data.owned,\r\n\t\t\t\t\t\t\tcountOwnedPages: data.data.owned_pages,\r\n\t\t\t\t\t\t\tcountSubsPages: data.data.subscription_pages,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tNotification.error(\"!\", \"  , ,   \")\r\n\t\t\t\t\t\tthis.props.history.push(\"/\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\thideLoader()\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\tNotification.error(\"!\", \"  , ,   \")\r\n\t\t\t\t\tthis.props.history.push(\"/\")\r\n\t\t\t\t})\r\n\t\t// }\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tconsole.log(this.state.decksOwned);\r\n\t\tthis.updateDecks(this.state.currentOwnedPage, this.state.currentSubsPage)\r\n\t}\r\n\r\n\trender(){\r\n\r\n\t\treturn(\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<section className=\"lesson_section\">\r\n\t\t\t\t\t<h2 className=\"cards_main_name\">{this.props.t`Pages.Decks.MyDecks`}</h2>\r\n\t\t\t\t\t<div className=\"cards\">\r\n\t\t\t\t\t\t{/* deck for EDIT */}\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.isEdit && <DeckActive\r\n\r\n\t\t\t\t\t\t\t\tindex={-1}\r\n\t\t\t\t\t\t\t\tid={this.state.deckEdit?.id || -1}\r\n\t\t\t\t\t\t\t\tname={this.state.deckEdit?.name || \"NONAME\"} \r\n\t\t\t\t\t\t\t\tcountWords={this.state.deckEdit?.countWords || 0} \r\n\t\t\t\t\t\t\t\tcountRepetitions={this.state.deckEdit?.countRepetitions || 0} \r\n\t\t\t\t\t\t\t\tisPrivate={this.state.deckEdit?.isPrivate} \r\n\t\t\t\t\t\t\t\tmainLang={this.state.deckEdit?.mainLang || \"NL\"} \r\n\t\t\t\t\t\t\t\tsecondLang={this.state.deckEdit?.secondLang || \"NL\"} \r\n\t\t\t\t\t\t\t\tcards={this.state.deckEdit?.cards || []}\r\n\t\t\t\t\t\t\t\tauthor={this.state.deckEdit?.author}\r\n\t\t\t\t\t\t\t\towner={this.state.deckEdit?.owner}\r\n\t\t\t\t\t\t\t\tdescription={this.state.deckEdit?.description || \"no description\"}\r\n\t\t\t\t\t\t\t\tcountLikes={this.state.deckEdit?.countLikes || 0}\r\n\t\t\t\t\t\t\t\tactiveLike={this.state.deckEdit?.activeLike || false}\r\n\r\n\t\t\t\t\t\t\t\tenableMethods={{\r\n\t\t\t\t\t\t\t\t\tenableSave: true,\r\n\t\t\t\t\t\t\t\t\tenableDelete: true\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclose={this.handleCloseActiveEditingDeck.bind(this)}\r\n\t\t\t\t\t\t\t\tsave={this.saveDeck.bind(this)}\r\n\t\t\t\t\t\t\t\tdelete={this.deleteDeck.bind(this)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{/* New Deck */}\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.isNewDeck && <DeckActive\r\n\t\t\t\t\t\t\t\tindex={-1}\r\n\t\t\t\t\t\t\t\tid={-1}\r\n\t\t\t\t\t\t\t\tname={\"New Deck\"} \r\n\t\t\t\t\t\t\t\tcountWords={0} \r\n\t\t\t\t\t\t\t\tcountRepetitions={0} \r\n\t\t\t\t\t\t\t\tisPrivate={false} \r\n\t\t\t\t\t\t\t\tmainLang={\"RU\"} \r\n\t\t\t\t\t\t\t\tsecondLang={\"ENG\"} \r\n\t\t\t\t\t\t\t\tcards={[]}\r\n\t\t\t\t\t\t\t\tauthor={this.props.user.login}\r\n\t\t\t\t\t\t\t\towner={this.props.user.login}\r\n\t\t\t\t\t\t\t\tdescription={\"\"}\r\n\t\t\t\t\t\t\t\tcountLikes={0}\r\n\t\t\t\t\t\t\t\tactiveLike={false}\r\n\r\n\t\t\t\t\t\t\t\tenableMethods={{\r\n\t\t\t\t\t\t\t\t\tenableCreate: true\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclose={this.handleCloseActiveAddingDeck.bind(this)}\r\n\t\t\t\t\t\t\t\tcreate={this.createNewDeck.bind(this)}\r\n\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t{/* Adding deck */}\r\n\t\t\t\t\t\t<DeckAdd add={this.addDeck.bind(this)} />\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.decksOwned.length !== 0 && this.state.decksOwned.map((deck: IDeckDefault, index: number) => {\r\n\t\t\t\t\t\t\t\treturn <Deck\r\n\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\tid={deck.id}\r\n\t\t\t\t\t\t\t\t\tname={deck.name}\r\n\t\t\t\t\t\t\t\t\tcountWords={deck.countWords || 0} \r\n\t\t\t\t\t\t\t\t\tauthor={deck.author}\r\n\t\t\t\t\t\t\t\t\towner={deck.owner}\r\n\t\t\t\t\t\t\t\t\tdescription={deck.description}\r\n\t\t\t\t\t\t\t\t\tcountRepetitions={deck.countRepetitions || 0} \r\n\t\t\t\t\t\t\t\t\tisPrivate={deck.isPrivate} \r\n\t\t\t\t\t\t\t\t\tmainLang={deck.mainLang.toUpperCase()} \r\n\t\t\t\t\t\t\t\t\tsecondLang={deck.secondLang.toUpperCase()}\r\n\t\t\t\t\t\t\t\t\tcountLikes={deck.countLikes || 0}\r\n\t\t\t\t\t\t\t\t\tactiveLike={deck.activeLike || false}\r\n\t\t\t\t\t\t\t\t\tcards={deck.cards}\r\n\t\t\t\t\t\t\t\t\tkey={`deck_${index}`}\r\n\r\n\t\t\t\t\t\t\t\t\t// enables\r\n\t\t\t\t\t\t\t\t\tenableMethods={{ \r\n\t\t\t\t\t\t\t\t\t\tenableChangePrivate: true, \r\n\t\t\t\t\t\t\t\t\t\tenableDelete: true, \r\n\t\t\t\t\t\t\t\t\t\tenableEdit:true,\r\n\t\t\t\t\t\t\t\t\t\tenableLike: true\r\n\t\t\t\t\t\t\t\t\t}}\r\n\r\n\t\t\t\t\t\t\t\t\t// active methods\r\n\t\t\t\t\t\t\t\t\tedit={this.editDeck.bind(this)}\r\n\t\t\t\t\t\t\t\t\tdelete={this.deleteDeck.bind(this)}\r\n\t\t\t\t\t\t\t\t\tlike={this.like}\r\n\t\t\t\t\t\t\t\t\tchangePrivate={this.changePrivate.bind(this)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Pagination \r\n\t\t\t\t\t\tcountPages={this.state.countOwnedPages}\r\n\t\t\t\t\t\tchangeCountPages={() => console.log()}\r\n\t\t\t\t\t\tchangeCurrentPage={choosen => this.handleChangeCurrentOwnedPage(choosen)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</section>\r\n\r\n\t\t\t\t<section className={`lesson_section ${this.state.decksSubscriptions.length === 0? \"noactive\": \"active\"}`}>\r\n\t\t\t\t\t<h2 className=\"cards_main_name\">{this.props.t`Pages.Decks.MySubsDecks`}</h2>\r\n\t\t\t\t\t<div className=\"cards\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.decksSubscriptions.length !== 0 && \r\n\t\t\t\t\t\t\t\tthis.state.decksSubscriptions.map((deck: IDeckDefault, index: number) => {\r\n\t\t\t\t\t\t\t\t\treturn <Deck\r\n\t\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\t\tid={deck.id}\r\n\t\t\t\t\t\t\t\t\t\tname={deck.name}\r\n\t\t\t\t\t\t\t\t\t\tcountWords={deck.countWords || 0} \r\n\t\t\t\t\t\t\t\t\t\tauthor={deck.author}\r\n\t\t\t\t\t\t\t\t\t\towner={deck.owner}\r\n\t\t\t\t\t\t\t\t\t\tdescription={deck.description}\r\n\t\t\t\t\t\t\t\t\t\tcountRepetitions={deck.countRepetitions || 0} \r\n\t\t\t\t\t\t\t\t\t\tisPrivate={deck.isPrivate} \r\n\t\t\t\t\t\t\t\t\t\tmainLang={deck.mainLang.toUpperCase()} \r\n\t\t\t\t\t\t\t\t\t\tsecondLang={deck.secondLang.toUpperCase()}\r\n\t\t\t\t\t\t\t\t\t\tcountLikes={deck.countLikes || 0}\r\n\t\t\t\t\t\t\t\t\t\tactiveLike={deck.activeLike || false}\r\n\t\t\t\t\t\t\t\t\t\tcards={deck.cards}\r\n\t\t\t\t\t\t\t\t\t\tkey={`deck_${index}`}\r\n\t\t\t\t\t\t\t\t\t\tsubscribed={deck.subscribed}\r\n\t\t\t\t\t\t\t\t\t\tsubscribe={this.handleUnsibscribe.bind(this)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t// enables\r\n\t\t\t\t\t\t\t\t\t\tenableMethods={{ \r\n\t\t\t\t\t\t\t\t\t\t\tenableLike: true,\r\n\t\t\t\t\t\t\t\t\t\t\tenableSubscribe: true\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\r\n\t\t\t\t\t\t\t\t\t\t// active methods\r\n\t\t\t\t\t\t\t\t\t\tlike={this.like}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Pagination \r\n\t\t\t\t\t\tcountPages={this.state.countSubsPages}\r\n\t\t\t\t\t\tchangeCountPages={() => console.log()}\r\n\t\t\t\t\t\tchangeCurrentPage={choosen => this.handleChangeCurrentSubsPage(choosen)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</section>\r\n\t\t\t</React.Fragment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withTranslation()(connector(Decks))\r\n","import React from 'react';\r\n\r\n// Components\r\n\r\n// App styles\r\nimport \"../styles/reset.scss\"\r\nimport '../styles/main.scss';\r\n\r\ninterface HomeProps{\r\n\tsayHello?: string \r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nconst Home: React.FC<HomeProps> = (props: HomeProps) => {\r\n\treturn (\r\n\t\t<div className=\"home\">\r\n\t\t\t{/* <Currsection info={{Hello: 20, \"dflmdf fdf\": \"310/31\"}} />\r\n\t\t\t<Card currentWord={3} countWords={10} word=\"Spring\" hint=\"\" /> */}\r\n\t\t\t<p style={{color: \"white\"}}>Home, sweet home</p> \r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Home;\r\n","import React, { createRef, MouseEvent, SyntheticEvent } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { RouteComponentProps } from 'react-router-dom'\r\n\r\nimport Action from \"../redux/actions\"\r\nimport API from \"../api\"\r\nimport { Notification } from '../components/Notification';\r\n\r\n// Styles\r\nimport \"../styles/forms.scss\"\r\nimport { Dispatch } from 'redux';\r\nimport { RootState } from '../redux/store';\r\nimport { User } from '../domains/entities/user.entity';\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\tauth: state.app.auth\r\n})\r\n\r\nconst mapDispatchToProps = (f: Dispatch) => ({\r\n\tlogin: (user: User) => f(Action.app.login(user))\r\n})\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector> & RouteComponentProps \r\n\r\n\r\ninterface StateLogin{\r\n\tloginValidate: boolean | null,\r\n\tpasswordValidate: boolean | null\r\n}\r\n\r\ninterface FocusEvent<T = Element> extends SyntheticEvent<T> {\r\n\trelatedTarget: EventTarget | null;\r\n\ttarget: EventTarget & T;\r\n}\r\n\r\nclass Login extends React.Component<PropsFromRedux, StateLogin>{\r\n\tpublic state = {\r\n\t\t// validate\r\n\t\tloginValidate: null,\r\n\t\tpasswordValidate: null\r\n\t}\r\n\tprivate login = createRef<HTMLInputElement>()\r\n\tprivate password = createRef<HTMLInputElement>()\r\n\r\n\t// eslint-disable-next-line @typescript-eslint/no-useless-constructor\r\n\tconstructor(props: PropsFromRedux){\r\n\t\tsuper(props)\r\n\t}\r\n\r\n\tclickLogin(e: MouseEvent){\r\n\t\te.preventDefault()\r\n\t\tthis.state.loginValidate !== false && this.state.passwordValidate !== false ? API.login({\r\n\t\t\tlogin: this.login.current?.value,\r\n\t\t\tpassword: this.password.current?.value\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tif(!res.data.error){\r\n\t\t\t\t\tthis.props.login(res.data)\r\n\t\t\t\t\tthis.props.history.push(\"/\")\r\n\t\t\t\t\tNotification.success(\"OK\", \" !\", 3000)\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tNotification.error(\"\", \"   \", 4000)\r\n\t\t\t\t})\r\n\t\t\t.catch(() => Notification.error(\"Error\", \"Error on server\")):\r\n\r\n\t\t\tNotification.error(\"Error\", \"Login or password too long\")\r\n\t}\r\n\r\n\tvalidateForm(e: FocusEvent<HTMLInputElement>){\r\n\t\tconsole.log(e)\r\n\t\tswitch(e.target.name){\r\n\t\t\tcase \"login\":\r\n\t\t\t\te.target.value.length > 3 && \r\n\t\t\t\t\tthis.setState({ loginValidate: e.target.value.length < 30 })\r\n\t\t\t\tbreak\r\n\t\t\tcase \"password\":\r\n\t\t\t\te.target.value.length > 7 && \r\n\t\t\t\t\tthis.setState({ passwordValidate: e.target.value.length < 40 })\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div className=\"login\">\r\n\t\t\t\t<form>\r\n\t\t\t\t\t<h2>Login</h2>\r\n\t\t\t\t\t<div className=\"form-floating mb-3\">\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\tname=\"login\" \r\n\t\t\t\t\t\t\tonBlur={ e => this.validateForm(e) } \r\n\t\t\t\t\t\t\tref={this.login} \r\n\t\t\t\t\t\t\tclassName={`input-login form-control \r\n\t\t\t\t\t\t\t\t${this.state.loginValidate !== null ? \r\n\t\t\t\t\t\t\t\t\t(this.state.loginValidate? \"is-valid\": \"is-invalid\"): \r\n\t\t\t\t\t\t\t\t\t\"\"}`} \r\n\t\t\t\t\t\t\tid=\"floatingInput\" \r\n\t\t\t\t\t\t\tplaceholder=\"your login\" \r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label htmlFor=\"floatingInput\">Login</label>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"form-floating mb-3\">\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\ttype=\"password\" \r\n\t\t\t\t\t\t\tonBlur={ e => this.validateForm(e) } \r\n\t\t\t\t\t\t\tref={this.password} \r\n\t\t\t\t\t\t\tclassName={`input-password form-control \r\n\t\t\t\t\t\t\t\t${this.state.passwordValidate !== null ? \r\n\t\t\t\t\t\t\t\t\t(this.state.passwordValidate? \"is-valid\": \"is-invalid\"): \r\n\t\t\t\t\t\t\t\t\t\"\"}`} \r\n\t\t\t\t\t\t\tid=\"floatingInput\"\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\tplaceholder=\"your password\" \r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label htmlFor=\"floatingInput\">Password</label>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button className=\"btn btn-primary\" onClick={e => this.clickLogin(e)}>login</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default connector(Login)","import React from 'react';\r\n// import { RouteComponentProps } from 'react-router-dom'\r\n\r\n\r\n\r\n// // eslint-disable-next-line @typescript-eslint/no-empty-interface\r\n// interface StatisticsProps extends RouteComponentProps {\r\n// }\r\n\r\n// // eslint-disable-next-line @typescript-eslint/no-empty-interface\r\n// interface StatisticsState{\r\n// }\r\n\r\nclass Statistics extends React.Component{\r\n\r\n\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div className=\"page_statistics\">\r\n\t\t\t\tStatistics\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default Statistics;\r\n","import React, { createRef, MouseEvent, SyntheticEvent } from \"react\"\r\nimport { connect, ConnectedProps } from \"react-redux\"\r\nimport { RouteComponentProps } from \"react-router-dom\"\r\nimport { Dispatch } from \"redux\"\r\n\r\nimport API from \"../api\"\r\nimport { Notification } from \"../components/Notification\"\r\nimport { User } from \"../domains/entities/user.entity\"\r\nimport Action from \"../redux/actions\"\r\nimport { RootState } from \"../redux/store\"\r\n\r\nimport \"../styles/forms.scss\"\r\n\r\ninterface FocusEvent<T = Element> extends SyntheticEvent<T> {\r\n\trelatedTarget: EventTarget | null;\r\n\ttarget: EventTarget & T;\r\n}\r\n\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\tauth: state.app.auth\r\n})\r\n\r\nconst mapDispatchToProps = (f: Dispatch) => ({\r\n\tlogin: (user: User) => f(Action.app.login(user))\r\n})\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector> & RouteComponentProps \r\n\r\ninterface RegistrationState{\r\n\tnameValidate: boolean | null\r\n\tloginValidate: boolean | null\r\n\tpasswordValidate: boolean | null\r\n}\r\n\r\nclass Registration extends React.Component<PropsFromRedux, RegistrationState>{\r\n\tpublic state = {\r\n\t\tnameValidate: null,\r\n\t\tloginValidate: null,\r\n\t\tpasswordValidate: null\r\n\t}\r\n\tprivate name = createRef<HTMLInputElement>()\r\n\tprivate login = createRef<HTMLInputElement>()\r\n\tprivate password = createRef<HTMLInputElement>()\r\n\tprivate rpassword = createRef<HTMLInputElement>()\r\n\r\n\t// eslint-disable-next-line @typescript-eslint/no-useless-constructor\r\n\tconstructor(props: PropsFromRedux){\r\n\t\tsuper(props)\r\n\t}\r\n\r\n\tclickRegistration(e: MouseEvent){\r\n\t\te.preventDefault()\r\n\t\tif(this.state.loginValidate && this.state.nameValidate && this.state.passwordValidate){\r\n\t\t\tif(this.password.current?.value === this.rpassword.current?.value){\r\n\t\t\t\tAPI.registration({\r\n\t\t\t\t\tname: this.name.current?.value,\r\n\t\t\t\t\tlogin: this.login.current?.value,\r\n\t\t\t\t\tpassword: this.password.current?.value,\r\n\t\t\t\t\trefer: null\r\n\t\t\t\t})\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tif(!res.data.error){\r\n\t\t\t\t\t\t\tthis.props.login(res.data)\r\n\t\t\t\t\t\t\tthis.props.history.push(\"/\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tNotification.error(\"\", \",    \", 4000)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => console.log(err))\r\n\t\t\t}\r\n\t\t\t// Exception: passwords is not equal\r\n\t\t\telse \r\n\t\t\t\tNotification.warning(\"\", \"  \", 4000)\r\n\t\t}\r\n\t\telse Notification.warning(\"\", \"  \", 4000)\r\n\t\t\r\n\t}\r\n\r\n\tonValidate(e: FocusEvent<HTMLInputElement>){\r\n\t\tconsole.log(e);\r\n\t\tswitch(e.currentTarget.name){\r\n\t\t\tcase \"name\":\r\n\t\t\t\tthis.setState({ nameValidate: e.currentTarget.value.length > 4 }); break\r\n\t\t\tcase \"login\":\r\n\t\t\t\tthis.setState({ loginValidate: e.currentTarget.value.length > 3 }); break\r\n\t\t\tcase \"password\":\r\n\t\t\t\tthis.setState({ passwordValidate: e.currentTarget.value.length > 7 }); break\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div className=\"registration\">\r\n\t\t\t\t<form>\r\n\t\t\t\t\t<h2>Registration</h2>\r\n\t\t\t\t\t<div className=\"form-floating mb-3\">\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\tclassName={`form-control \r\n\t\t\t\t\t\t\t\t${this.state.nameValidate !== null ? \r\n\t\t\t\t\t\t\t\t\t(this.state.nameValidate? \"is-valid\": \r\n\t\t\t\t\t\t\t\t\t\"is-invalid\"): \r\n\t\t\t\t\t\t\t\t\"\"}\r\n\t\t\t\t\t\t\t`}\r\n\t\t\t\t\t\t\tonBlur={e => this.onValidate(e)}\r\n\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\tref={this.name} \r\n\t\t\t\t\t\t\tid=\"floatingInput\"\r\n\t\t\t\t\t\t\tplaceholder=\"your name\" />\r\n\t\t\t\t\t\t<label htmlFor=\"floatingInput\">Name</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"form-floating mb-3\">\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\tname=\"login\"\r\n\t\t\t\t\t\t\tclassName={`form-control \r\n\t\t\t\t\t\t\t\t${this.state.loginValidate !== null ? \r\n\t\t\t\t\t\t\t\t\t(this.state.loginValidate? \r\n\t\t\t\t\t\t\t\t\t\t\"is-valid\": \r\n\t\t\t\t\t\t\t\t\t\t\"is-invalid\"): \r\n\t\t\t\t\t\t\t\t\t\"\"}\r\n\t\t\t\t\t\t\t\t`}\r\n\t\t\t\t\t\t\tonBlur={e => this.onValidate(e)}\r\n\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\tref={this.login} \r\n\t\t\t\t\t\t\tid=\"floatingInput\" \r\n\t\t\t\t\t\t\tplaceholder=\"your login\" />\r\n\t\t\t\t\t\t<label htmlFor=\"floatingInput\">Login</label>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"form-floating mb-3\">\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\tclassName={`form-control \r\n\t\t\t\t\t\t\t\t${this.state.passwordValidate !== null ? \r\n\t\t\t\t\t\t\t\t\t(this.state.passwordValidate? \r\n\t\t\t\t\t\t\t\t\t\t\"is-valid\": \r\n\t\t\t\t\t\t\t\t\t\t\"is-invalid\"): \r\n\t\t\t\t\t\t\t\t\t\"\"}\r\n\t\t\t\t\t\t\t\t`}\r\n\t\t\t\t\t\t\tonBlur={e => this.onValidate(e)}\r\n\t\t\t\t\t\t\ttype=\"password\" \r\n\t\t\t\t\t\t\tref={this.password} \r\n\t\t\t\t\t\t\tid=\"floatingInput\" \r\n\t\t\t\t\t\t\tplaceholder=\"your password\" />\r\n\t\t\t\t\t\t<label htmlFor=\"floatingInput\">Password</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"form-floating mb-3\">\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\ttype=\"password\" \r\n\t\t\t\t\t\t\tref={this.rpassword} \r\n\t\t\t\t\t\t\tclassName=\"form-control\" \r\n\t\t\t\t\t\t\tid=\"floatingInput\" \r\n\t\t\t\t\t\t\tplaceholder=\"your password\" \r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label htmlFor=\"floatingInput\">Repeat password</label>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button className=\"btn btn-primary\" onClick={e => this.clickRegistration(e)}>registration</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default connector(Registration)","import { Dispatch } from \"redux\"\r\nimport { Link } from 'react-router-dom';\r\nimport React, { useState } from 'react';\r\nimport { RouteComponentProps } from 'react-router'\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { FaArrowRight, FaTimesCircle, FaArrowsAltH } from \"react-icons/fa\"\r\n\r\nimport API from '../api';\r\nimport { ICard } from '../domains/entities/card.entity';\r\nimport { IDeck } from '../domains/entities/dek.entity';\r\n\r\nimport Action from \"../redux/actions\"\r\nimport Currsection from '../components/Currsection';\r\nimport { Notification } from '../components/Notification';\r\n\r\nimport \"../styles/pages/Play.scss\"\r\nimport { WithTranslation, withTranslation } from 'react-i18next';\r\n\r\nconst mapDispatchToProps = (f: Dispatch) => ({\r\n\taddScores: (scores: number) => f(Action.app.addScores(scores))\r\n})\r\n\r\nconst connector = connect(null, mapDispatchToProps)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>\r\n\r\n\r\ninterface IPlayProps extends RouteComponentProps, PropsFromRedux, WithTranslation{\r\n}\r\n\r\ninterface ResultEndPlayToServer{\r\n\tidCard: number\r\n\ttime: number\r\n\tanswer: boolean\r\n}\r\n\r\ninterface Results{\r\n\tmain_word: string\r\n\tanswer: string\r\n\tsuccessed: boolean\r\n\ttime: number\r\n}\r\n\r\ninterface StatePlay{\r\n\tdeck: IDeck | null\r\n\tcards: ICard[]\r\n\tcurrentCard: number\r\n\tcurrentLang: string\r\n\tlastLang: string\r\n\tendedWithLastLang: boolean\r\n\tsuccessed: ResultEndPlayToServer[]\r\n\tvalueInputAnswer: string\r\n\tended: boolean\r\n\tshowResults: boolean\r\n\tscores: number\r\n\tvisibleHint: boolean\r\n}\r\n\r\ninterface LangTogglerProps{\r\n\t// data props\r\n\tmainLang: string\r\n\tsecondLang: string\r\n\tchangeable: boolean\r\n\r\n\t// component props\r\n\tclassName?: string\r\n\t// Actions\r\n\tchangeLang: (changedLang: string) => void\r\n}\r\n\r\nconst LangToggler: React.FC<LangTogglerProps> = (props) => {\r\n\tconst [mainLangBool, setMainLangBool] = useState(true)\r\n\t\r\n\tconst handleChangeLang = (lang: string, mainBool: boolean) => {\r\n\t\tprops.changeLang(lang)\r\n\t\tsetMainLangBool(mainBool)\r\n\t}\r\n\treturn (\r\n\t\t<div className={`lang_toggler ${props.className || \"\"}`}>\r\n\t\t\t<span \r\n\t\t\t\tclassName={`main_lang_button main_lang_button-${!mainLangBool? \"non-actived\": \"actived\"}`}\r\n\t\t\t\tonClick={() => props.changeable && handleChangeLang(props.mainLang, true)}>\r\n\t\t\t\t\t{props.mainLang}\r\n\t\t\t</span>\r\n\t\t\t<span className=\"lang_toggler__seporator\" onClick={() => props.changeable && handleChangeLang(mainLangBool? props.secondLang : props.mainLang, !mainLangBool)}><FaArrowsAltH /></span>\r\n\t\t\t<span \r\n\t\t\t\tclassName={`second_lang_button second_lang_button-${mainLangBool? \"non-actived\": \"actived\"}`}\r\n\t\t\t\tonClick={() => props.changeable && handleChangeLang(props.secondLang, false)}>\r\n\t\t\t\t\t{props.secondLang}\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\ninterface ListResultsProps{\r\n\tresults: Results[]\r\n}\r\n\r\nconst ListResults: React.FC<ListResultsProps> = props => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<h2 className=\"section_results__header\">Results</h2>\r\n\t\t\t<ul className=\"section_results_header_list\">\r\n\t\t\t\t<li>Main word</li>\r\n\t\t\t\t<li>Answer word</li>\r\n\t\t\t\t<li>Correct</li>\r\n\t\t\t\t<li>Time answer</li>\r\n\t\t\t</ul>\r\n\t\t\t<ul className=\"section_results_list\">\r\n\t\t\t\t{\r\n\t\t\t\t\tprops.results.map((result, index) => {\r\n\t\t\t\t\t\treturn <li key={index} className=\"section_results_list__item\">\r\n\t\t\t\t\t\t\t<span className=\"section_results_list__item__main_word\">{result.main_word}</span>\r\n\t\t\t\t\t\t\t<span className=\"section_results_list__item__answer\">{result.answer}</span>\r\n\t\t\t\t\t\t\t<div className={`section_results_list__item__successed section_results_list__item__successed-${result.successed? \"correct\": \"non-correct\"}`}>\r\n\t\t\t\t\t\t\t\t<span>{result.successed? \"Correct\": \"Wrong\"}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<span className=\"section_results_list__item__time\">{result.time}s</span>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</ul>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\n\r\nclass Play extends React.Component<IPlayProps, StatePlay>{\r\n\tprivate TIME_CARD = 0\r\n\tconstructor(props: IPlayProps){\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tdeck: null,\r\n\t\t\tcards: [],\r\n\t\t\tcurrentLang: \"ENG\",\r\n\t\t\tlastLang: \"ENG\",\r\n\t\t\tendedWithLastLang: true,\r\n\t\t\tcurrentCard: 0,\r\n\t\t\tsuccessed: [],\r\n\t\t\tvalueInputAnswer: \"\",\r\n\t\t\tended: false,\r\n\t\t\tshowResults: false,\r\n\t\t\tscores: 0,\r\n\t\t\tvisibleHint: false\r\n\t\t}\r\n\t\t\r\n\t}\r\n\tshuffleCards(array: ICard[]) {\r\n\t\tfor (let i = array.length - 1; i > 0; i--) {\r\n\t\t\tconst j = Math.floor(Math.random() * (i + 1));\r\n\t\t\t[array[i], array[j]] = [array[j], array[i]];\r\n\t\t}\r\n\r\n\t\treturn array;\r\n\t}\r\n\r\n\tnextCard(successed: boolean){\r\n\t\tif(this.state.currentCard + 1 < this.state.cards.length){\t\t\r\n\t\t\tthis.setState({ \r\n\t\t\t\tcurrentCard: this.state.currentCard + 1,\r\n\t\t\t\tendedWithLastLang: true,\r\n\t\t\t\tlastLang: this.state.currentLang,\r\n\t\t\t\tsuccessed: [\r\n\t\t\t\t\t...this.state.successed, \r\n\t\t\t\t\t{ \r\n\t\t\t\t\t\tidCard: this.state.cards[this.state.currentCard].id, \r\n\t\t\t\t\t\ttime: this.getTimeDeck(\"end\"),\r\n\t\t\t\t\t\tanswer: successed\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}, () => this.getTimeDeck(\"start\"))\r\n\t\t}\r\n\t\telse{\r\n\t\t\t\r\n\t\t\tthis.setState({ ended: true, successed: [\r\n\t\t\t\t...this.state.successed, \r\n\t\t\t\t{ \r\n\t\t\t\t\tidCard: this.state.cards[this.state.currentCard].id, \r\n\t\t\t\t\ttime: this.getTimeDeck(\"end\"),\r\n\t\t\t\t\tanswer: successed\r\n\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.getTimeDeck(\"start\")\r\n\t\t\t\tAPI.getScoresAfterEndPlay({\r\n\t\t\t\t\tresults: this.state.successed\r\n\t\t\t\t}, this.state.deck?.id || -1)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t// console.log(res);\r\n\t\t\t\t\t\tthis.setState({ scores: res.data.score || 0 })\r\n\t\t\t\t\t\tthis.props.addScores(res.data.score || 0)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => console.log(err))\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tgetTimeDeck(state: \"start\" | \"end\"): number{\r\n\t\tif(state === \"start\"){\r\n\t\t\tthis.TIME_CARD = new Date().getTime()\r\n\t\t}\r\n\t\telse if(state === \"end\"){\r\n\t\t\tconst time_card = this.TIME_CARD\r\n\t\t\tthis.TIME_CARD = 0\r\n\t\t\treturn Math.ceil((new Date().getTime() - time_card) / 1000)\r\n\t\t}\r\n\t\treturn 0\r\n\t}\r\n\r\n\tcheckCard(card: ICard, value: string): boolean{\r\n\t\tconst answers = this.state.endedWithLastLang?\r\n\t\t\t(this.state.currentLang === this.state.deck?.mainLang? \r\n\t\t\tcard.answer\r\n\t\t\t\t.split(\"|\")\r\n\t\t\t\t.map(ans => ans.trim().toLowerCase()):\r\n\t\t\tcard.main_word\r\n\t\t\t\t.split(\"|\")\r\n\t\t\t\t.map(ans => ans.trim().toLowerCase())):\r\n\t\t\t(this.state.lastLang === this.state.deck?.mainLang? \r\n\t\t\t\tcard.answer\r\n\t\t\t\t\t.split(\"|\")\r\n\t\t\t\t\t.map(ans => ans.trim().toLowerCase()):\r\n\t\t\t\tcard.main_word\r\n\t\t\t\t\t.split(\"|\")\r\n\t\t\t\t\t.map(ans => ans.trim().toLowerCase()))\r\n\t\t\r\n\t\t\r\n\t\t\t\r\n\t\treturn answers.includes(value.toLowerCase())\r\n\t}\r\n\r\n\thandleNextCard(){\r\n\t\tconst valueAnswer = this.state.valueInputAnswer\r\n\t\tif(this.checkCard(this.state.cards[this.state.currentCard], valueAnswer))\r\n\t\t\tthis.nextCard(true)\r\n\t\telse{\r\n\t\t\tthis.nextCard(false)\r\n\t\t\tthis.setState({ valueInputAnswer: \"\" })\r\n\t\t\t// else input outline: red\r\n\t\t}\r\n\t}\r\n\t\r\n\thandleSkipCard(){\r\n\t\tthis.nextCard(false)\r\n\t}\r\n\r\n\thandleChangeInputAnswer(e: React.FormEvent<HTMLInputElement>){\r\n\t\tif(this.checkCard(this.state.cards[this.state.currentCard], e.currentTarget.value)){\r\n\t\t\tthis.setState({ valueInputAnswer: \"\"})\r\n\t\t\tthis.nextCard(true)\r\n\t\t}else{\r\n\t\t\tif(e.currentTarget.value === \"-\"){\r\n\t\t\t\tthis.nextCard(false)\r\n\t\t\t\tthis.setState({ valueInputAnswer: \"\" })\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tthis.setState({ valueInputAnswer: e.currentTarget.value })\r\n\t\t}\r\n\t}\r\n\r\n\thandleHint(){\r\n\t\tthis.setState({ visibleHint: !this.state.visibleHint })\r\n\t}\r\n\r\n\tgetResults(): Results[]{\r\n\t\treturn this.state.successed.map(suc => {\r\n\t\t\tconst __card = this.state.cards.filter(card => card.id === suc.idCard)[0]\r\n\t\t\treturn {\r\n\t\t\t\tmain_word: __card.main_word,\r\n\t\t\t\tanswer: __card.answer,\r\n\t\t\t\tsuccessed: suc.answer,\r\n\t\t\t\ttime: suc.time\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\thandleForceFinishGame(){\r\n\t\tthis.setState({\r\n\t\t\tended: true\r\n\t\t})\r\n\t\tAPI.getScoresAfterEndPlay({\r\n\t\t\tresults: this.state.successed\r\n\t\t}, this.state.deck?.id || -1)\r\n\t\t\t.then(res => {\r\n\t\t\t\t// console.log(res);\r\n\t\t\t\tthis.setState({ scores: res.data.score || 0 })\r\n\t\t\t\tthis.props.addScores(res.data.score || 0)\r\n\t\t\t})\r\n\t\t\t.catch(err => console.log(err))\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\tconst params: {id: number} = this.props.match.params as {id: number}\r\n\t\tconst id = Number(params.id)\r\n\t\tif(id){\r\n\t\t\tAPI.getDeck(id)\r\n\t\t\t\t.then(resp => {\r\n\t\t\t\t\tthis.getTimeDeck(\"start\")\r\n\t\t\t\t\tthis.setState({ \r\n\t\t\t\t\t\tdeck: resp.deck, \r\n\t\t\t\t\t\tcards: this.shuffleCards(resp.deck.cards),\r\n\t\t\t\t\t\tcurrentLang: resp.deck.mainLang\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tthis.props.history.push(\"/\")\r\n\t\t\t\t\tNotification.error(\"!\", \"    ,   \", 3000)\r\n\t\t\t\t})\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.props.history.push(\"/decks\")\r\n\t\t\tNotification.warning(\"You have not choise Deck\", \"Please, choose playing Deck\", 4000)\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tconsole.log(this.state.currentLang, this.state.endedWithLastLang, this.state.endedWithLastLang &&\r\n\t\t\tthis.state.currentLang === this.state.deck?.mainLang);\r\n\t\treturn(\r\n\t\t\t<div className=\"Play page\" style={{color: \"white\"}}>\r\n\t\t\t\t<div className={`Play__card ${this.state.ended? \"ended\": \"\"}`}>\r\n\r\n\r\n\t\t\t\t\t<div className=\"top_panel\">\r\n\t\t\t\t\t\t<div className=\"top_left_panel\">\r\n\t\t\t\t\t\t\t<Currsection \r\n\t\t\t\t\t\t\t\tclassName=\"top_panel__currsection\"\r\n\t\t\t\t\t\t\t\tinfo = {{ \r\n\t\t\t\t\t\t\t\t\t[this.props.t(\"Pages.Play.name\")]: this.state.deck?.name as string,\r\n\t\t\t\t\t\t\t\t\t[this.props.t(\"Pages.Play.description\")]: this.state.deck?.description || \"no description\",\r\n\t\t\t\t\t\t\t\t\t[this.props.t(\"Pages.Play.currentCard\")]: `${this.state.currentCard + 1} / ${this.state.deck?.cards.length}`\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"top_right_panel\">\r\n\t\t\t\t\t\t\t<LangToggler \r\n\t\t\t\t\t\t\t\tclassName=\"top_right_panel__lang_toggler\"\r\n\t\t\t\t\t\t\t\tchangeable={this.state.endedWithLastLang}\r\n\t\t\t\t\t\t\t\tmainLang={this.state.deck?.mainLang || \"\"}\r\n\t\t\t\t\t\t\t\tsecondLang={this.state.deck?.secondLang || \"\"}\r\n\t\t\t\t\t\t\t\tchangeLang={lang => this.state.endedWithLastLang && this.setState({ currentLang: lang, lastLang: this.state.currentLang, endedWithLastLang: false })}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<button onClick={() => this.handleForceFinishGame()} className=\"top_right_panel__button_finish\">Force Finish</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\r\n\r\n\t\t\t\t\t<section className=\"lesson_section Play__card_section\">\r\n\t\t\t\t\t\t<div className=\"lesson_card\">\r\n\r\n\t\t\t\t\t\t\t<span className=\"lesson_card_lang\">\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.state.currentLang === this.state.lastLang ? \r\n\t\t\t\t\t\t\t\t\t\tthis.state.currentLang.toUpperCase() :\r\n\t\t\t\t\t\t\t\t\t\t`${this.state.lastLang.toUpperCase()} -> ${this.state.currentLang.toUpperCase()}`\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t\t<button className=\"lesson_card_hint\" onClick={this.handleHint.bind(this)}>?</button>\r\n\t\t\t\t\t\t\t<div className={`hint ${this.state.visibleHint? \"active\": \"noactive\"}`}>\r\n\t\t\t\t\t\t\t\t{this.state.cards[this.state.currentCard]?.description}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<span className=\"lesson_card_word\">\r\n\t\t\t\t\t\t\t\t{this.state.endedWithLastLang?\r\n\t\t\t\t\t\t\t\t\t(this.state.currentLang === this.state.deck?.mainLang?\r\n\t\t\t\t\t\t\t\t\t\tthis.state.cards[this.state.currentCard]?.main_word:\r\n\t\t\t\t\t\t\t\t\t\tthis.state.cards[this.state.currentCard]?.answer):\r\n\t\t\t\t\t\t\t\t\t(this.state.lastLang === this.state.deck?.mainLang?\r\n\t\t\t\t\t\t\t\t\t\t\tthis.state.cards[this.state.currentCard]?.main_word:\r\n\t\t\t\t\t\t\t\t\t\t\tthis.state.cards[this.state.currentCard]?.answer)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</span> \r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</section>\r\n\r\n\r\n\r\n\r\n\t\t\t\t\t<section className=\"lesson_section answer\">\r\n\t\t\t\t\t\t<div onClick={this.handleSkipCard.bind(this)} className=\"answer_button_skip_word\"><FaTimesCircle /></div>\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\tvalue={this.state.valueInputAnswer} \r\n\t\t\t\t\t\t\tonChange={this.handleChangeInputAnswer.bind(this)} \r\n\t\t\t\t\t\t\ttype=\"text\" className=\"answer_input\" \r\n\t\t\t\t\t\t\tplaceholder={`${this.props.t(\"Pages.Play.translateOn\")} ${!this.state.endedWithLastLang ? (this.state.lastLang === this.state.deck?.mainLang ? this.state.deck.secondLang : this.state.deck?.mainLang): (this.state.currentLang === this.state.deck?.mainLang ? this.state.deck.secondLang : this.state.deck?.mainLang)}...`} \r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div onClick={() => this.handleNextCard()} className=\"answer_button_next_word\"><FaArrowRight /></div>\r\n\t\t\t\t\t</section>\r\n\t\t\t\t</div>\t\r\n\t\t\t\t\r\n\r\n\r\n\t\t\t\t{/* The end */}\r\n\t\t\t\t<div className={`section_congratulations ${this.state.ended && !this.state.showResults? \"ended\": \"\"}`}>\r\n\t\t\t\t\t<div className=\"congratulations\">\r\n\t\t\t\t\t\t<div className=\"welc\">\r\n\t\t\t\t\t\t\t<h2>{this.props.t(\"Pages.Play.congr\")}</h2>\r\n\t\t\t\t\t\t\t<h3>{this.props.t(\"Pages.Play.congrDesc1\")} &quot;{this.state.deck?.name}&quot; {this.props.t(\"Pages.Play.congrDesc2\")}</h3>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<h1>{this.props.t(\"Pages.Play.scores\")}: {this.state.scores}</h1>\r\n\t\t\t\t\t\t<div className=\"control_buttons\">\r\n\t\t\t\t\t\t\t<button \r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-primary\" \r\n\t\t\t\t\t\t\t\tonClick={() => this.setState({ \r\n\t\t\t\t\t\t\t\t\tended: false, \r\n\t\t\t\t\t\t\t\t\tcurrentCard: 0, \r\n\t\t\t\t\t\t\t\t\tcards: this.shuffleCards(this.state.cards),\r\n\t\t\t\t\t\t\t\t\tsuccessed: []\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t>{this.props.t(\"Pages.Play.onceAgain\")}</button>\r\n\t\t\t\t\t\t\t<button \r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-success\" \r\n\t\t\t\t\t\t\t\tonClick={() => this.setState({ showResults: true })}\r\n\t\t\t\t\t\t\t>{this.props.t(\"Pages.Play.results\")}</button>\r\n\t\t\t\t\t\t\t<Link to=\"/decks\" className=\"btn btn-danger\">{this.props.t(\"Pages.Play.toDecks\")}</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className={`section_results ${this.state.showResults? \"showed\": \"hided\"}`}>\r\n\t\t\t\t\t<ListResults results={this.getResults()}/>\r\n\t\t\t\t\t<button className=\"btn btn-primary\" onClick={() => this.setState({ showResults: false })}>back</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default withTranslation()(connector(Play))\r\n","import React from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\n\r\nimport API from '../api';\r\nimport { showLoader, hideLoader } from \"../components\"\r\nimport { Deck, IDeckDefault } from '../components/Deck';\r\nimport Pagination from \"../components/Pagination\"\r\n\r\n// import \"../styles/pages/Decks.scss\"\r\nimport \"../styles/pages/Store.scss\"\r\nimport { RootState } from '../redux/store';\r\nimport { WithTranslation, withTranslation } from 'react-i18next';\r\n\r\ninterface StateStore{\r\n\tdecks: IDeckDefault[]\r\n\tcurrentPage: number\r\n\tcountPages: number\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\tauth: state.app.auth,\r\n\tnotify: state.notification,\r\n\tuser: state.app.user\r\n})\r\nconst connector = connect(mapStateToProps)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector> & WithTranslation\r\n\r\n\r\nclass Store extends React.Component<PropsFromRedux, StateStore>{\r\n\tpublic state: StateStore = {\r\n\t\tdecks: [],\r\n\t\tcurrentPage: 1,\r\n\t\tcountPages: 1\r\n\t}\r\n\tconstructor(props: PropsFromRedux){\r\n\t\tsuper(props)\r\n\t\tshowLoader()\r\n\t}\r\n\r\n\t// Methods\r\n\thandleLike(e: unknown, id: number){\r\n\t\tconsole.log(\"like\", id);\r\n\t\tAPI.setLike(id)\r\n\t\t\t.then(response => console.log(response))\r\n\t\t\t.catch(err => console.log(err))\r\n\t}\r\n\thandleClone(e: unknown, id: number){\r\n\t\tAPI.cloneDeck(id)\r\n\t\t\t.then(res => console.log(res))\r\n\t\t\t.catch(err => console.log(err))\r\n\t}\r\n\r\n\tupdateDecks(page: number){\r\n\t\tshowLoader()\r\n\t\tthis.setState({ decks: [], countPages: 0 })\r\n\t\tAPI.getAllDecks(page)\r\n\t\t.then(res => {\r\n\t\t\tconsole.log(res)\r\n\t\t\tthis.setState({ decks: res.data.decks, countPages: res.data.pages })\r\n\t\t\thideLoader()\r\n\t\t})\r\n\t\t.catch(err => console.log(err))\r\n\t}\r\n\thandleChangeCurrentPage(choosen: { selected: number }){\r\n\t\tthis.setState({ currentPage: choosen.selected + 1 })\r\n\t\tthis.updateDecks( choosen.selected + 1 )\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.updateDecks(this.state.currentPage)\r\n\t}\r\n\r\n\trender(){\r\n\t\tconsole.log(this.state.decks);\r\n\t\treturn(\r\n\t\t\t<div className=\"Store\" style={{color: \"white\"}}>\r\n\t\t\t\t<section className=\"lesson_section\">\r\n\t\t\t\t\t<h2 className=\"cards_main_name\">{this.props.t(\"Pages.Store.Store\")}</h2>\r\n\t\t\t\t\t<div className=\"cards\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.state.decks.length !== 0 && this.state.decks.map((deck: IDeckDefault, index: number) => {\r\n\t\t\t\t\t\t\t\treturn <Deck\r\n\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\tid={deck.id}\r\n\t\t\t\t\t\t\t\t\tname={deck.name}\r\n\t\t\t\t\t\t\t\t\tcountWords={deck.countWords || 0} \r\n\t\t\t\t\t\t\t\t\tauthor={deck.author}\r\n\t\t\t\t\t\t\t\t\towner={deck.owner}\r\n\t\t\t\t\t\t\t\t\tdescription={deck.description}\r\n\t\t\t\t\t\t\t\t\tcountRepetitions={deck.countRepetitions || 0} \r\n\t\t\t\t\t\t\t\t\tisPrivate={deck.isPrivate} \r\n\t\t\t\t\t\t\t\t\tmainLang={deck.mainLang.toUpperCase()} \r\n\t\t\t\t\t\t\t\t\tsecondLang={deck.secondLang.toUpperCase()}\r\n\t\t\t\t\t\t\t\t\tcountLikes={deck.countLikes || 0}\r\n\t\t\t\t\t\t\t\t\tactiveLike={deck.activeLike || false}\r\n\t\t\t\t\t\t\t\t\tcards={deck.cards}\r\n\t\t\t\t\t\t\t\t\tkey={`deck_${index}`}\r\n\t\t\t\t\t\t\t\t\tsubscribed={deck.subscribed}\r\n\t\t\t\t\t\t\t\t\tclone={this.handleClone}\r\n\r\n\t\t\t\t\t\t\t\t\tlike={this.handleLike}\r\n\r\n\t\t\t\t\t\t\t\t\tenableMethods={{\r\n\t\t\t\t\t\t\t\t\t\tenableLike: this.props.auth,\r\n\t\t\t\t\t\t\t\t\t\tenableSubscribe: deck.author !== this.props.user.login && this.props.auth,\r\n\t\t\t\t\t\t\t\t\t\tenableClone: this.props.auth\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<Pagination \r\n\t\t\t\t\t\tcountPages={this.state.countPages}\r\n\t\t\t\t\t\tchangeCountPages={() => console.log()}\r\n\t\t\t\t\t\tchangeCurrentPage={choosen => this.handleChangeCurrentPage(choosen)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</section>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default withTranslation()(connector(Store))\r\n","import React from 'react';\r\nimport { WithTranslation, withTranslation } from 'react-i18next';\r\nimport { Link } from 'react-router-dom';\r\nimport API from '../api';\r\nimport { hideLoader, showLoader } from '../components';\r\nimport { User } from '../domains/entities/user.entity';\r\n\r\nimport \"../styles/pages/Rating.scss\"\r\ninterface RatingItem{\r\n\taverage_rating: number\r\n\tlogin: string\r\n\tname: string\r\n\trating: number\r\n\twalkthroughs: number\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\r\ninterface IRatingProps extends WithTranslation{\r\n}\r\n\r\ninterface RatingState{\r\n\trating: RatingItem[]\r\n}\r\n\r\nclass Rating extends React.Component<IRatingProps, RatingState>{\r\n\tconstructor(props: IRatingProps){\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\trating: []\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tconst enableProps = [\"login\", \"rating\"]\r\n\t\tshowLoader()\r\n\t\tAPI.getRating()\r\n\t\t\t.then(data => {\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t\tthis.setState({ \r\n\t\t\t\t\trating: data.data.users.map((item: Record<string, string | number | boolean> & User) => \r\n\t\t\t\t\t\tObject.keys(item).reduce((prev, curr) => \r\n\t\t\t\t\t\t\tenableProps.includes(curr) ? {...prev, [curr]: item[curr]} : {...prev}, {}\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t}, () => hideLoader())\r\n\t\t\t})\r\n\t\t\t.catch(err => console.log(\"err\"))\r\n\t}\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div className=\"Rating\" style={{color: \"white\"}}>\r\n\t\t\t\t<h1>{this.props.t(\"Pages.Rating.Rating\")}</h1>\r\n\t\t\t\t<ul className=\"header\">\r\n\t\t\t\t\t<li><span className=\"header_login\">{this.props.t(\"Pages.Rating.login\")}</span></li>\r\n\t\t\t\t\t<li><span className=\"header_scores\">{this.props.t(\"Pages.Rating.scores\")}</span></li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t<ul className=\"main_list\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.rating.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <li className=\"main_list_item\" key={index}>\r\n\t\t\t\t\t\t\t\t<span className=\"login\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"index\">{index + 1}. </span>\r\n\t\t\t\t\t\t\t\t\t\t<Link to={`/user/${item.login}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t{ index === 0 && <span></span> }\r\n\t\t\t\t\t\t\t\t\t\t\t{ index === 1 && <span></span> }\r\n\t\t\t\t\t\t\t\t\t\t\t{ index === 2 && <span></span> }\r\n\t\t\t\t\t\t\t\t\t\t\t{item.login}\r\n\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<span className=\"rating\">{item.rating}</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default withTranslation()(Rating);\r\n","import React, { ReactNode } from 'react';\r\nimport { withTranslation } from 'react-i18next'\r\n\r\nimport { showLoader, hideLoader } from \"../components\"\r\n\r\nimport \"../styles/pages/Main.scss\"\r\n\r\ninterface IMainProps{\r\n\tt: (s: string) => ReactNode\r\n}\r\n\r\nclass Main extends React.Component<IMainProps>{\r\n\tconstructor(props: IMainProps){\r\n\t\tsuper(props)\r\n\t\tshowLoader()\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\thideLoader()\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div className=\"Main\" style={{color: \"white\"}}>\r\n\t\t\t\t<div className=\"slider\">\r\n\t\t\t\t\t<div className=\"image_wrapper\">\r\n\t\t\t\t\t\t<img className=\"image_slider\" src=\"images/slider.png\" alt=\"slider image\" />\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"text_block\">\r\n\t\t\t\t\t\t<h1>{this.props.t(\"Pages.Main.welcome\")}</h1>\r\n\t\t\t\t\t\t<p>{this.props.t(\"Pages.Main.description\")}</p>\r\n\t\t\t\t\t\t{/* <h2>Our advantages:</h2>\r\n\t\t\t\t\t\t<ul className=\"advantages\">\r\n\t\t\t\t\t\t\t<li className=\"advantages_item\">Simple</li>\r\n\t\t\t\t\t\t\t<li className=\"advantages_item\">Concise</li>\r\n\t\t\t\t\t\t\t<li className=\"advantages_item\">Fast</li>\r\n\t\t\t\t\t\t\t<li className=\"advantages_item\">Creative</li>\r\n\t\t\t\t\t\t</ul> */}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default withTranslation()(Main)","import React, { useEffect, useState } from \"react\"\r\nimport { Link, useHistory, useParams } from \"react-router-dom\";\r\nimport { FaStar } from \"react-icons/fa\"\r\nimport ScrollContainer from 'react-indiana-drag-scroll'\r\nimport API from \"../api\";\r\nimport { Deck } from \"../components/Deck\";\r\nimport { User } from \"../domains/entities/user.entity\"\r\n\r\nimport \"../styles/pages/User.scss\"\r\nimport { hideLoader, showLoader } from \"../components\";\r\nimport { WithTranslation, withTranslation } from \"react-i18next\";\r\nimport { Notification } from \"../components/Notification\";\r\nimport { RootState } from \"../redux/store\";\r\nimport { connect, ConnectedProps } from \"react-redux\";\r\n\r\ninterface ParamsUserPage{\r\n\tlogin: string\r\n}\r\n\r\nconst mapDispatchToProps = (state: RootState) => ({\r\n\tauth: state.app.auth\r\n})\r\n\r\nconst connector = connect(mapDispatchToProps)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>\r\n\r\n\r\n\r\nconst UserPage: React.FC<WithTranslation & PropsFromRedux> = props => {\r\n\tconst { login } = useParams<ParamsUserPage>();\r\n\tconst history = useHistory()\r\n\r\n\tconst [user, setUser] = useState({} as User)\r\n\tconst [loader, setLoader] = useState(false)\r\n\r\n\t!loader && showLoader()\r\n\tuseEffect(() => {\r\n\t\tAPI.getUser(login, 1)\r\n\t\t\t.then(data => {\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t\tsetUser(data)\r\n\t\t\t\tif(!loader){\r\n\t\t\t\t\thideLoader()\r\n\t\t\t\t\tsetLoader(true)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(data => console.log(user))\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log(\"[ERROR]: \", err);\r\n\t\t\t\tNotification.error(\"\", \",     ...\", 4000)\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\thistory.push(\"/\")\r\n\t\t\t\t}, 500)\r\n\t\t\t})\r\n\t}, [login, loader])\r\n\r\n\r\n\treturn (\r\n\t\t<div className=\"UserPage\">\r\n\t\t\t<div className=\"top_panel\">\r\n\r\n\r\n\t\t\t\t<div className=\"top_panel_left\">\r\n\t\t\t\t\t<div className=\"avatar\">\r\n\t\t\t\t\t\t<img src=\"https://avatars.githubusercontent.com/u/73424545?v=4\" alt=\"avatar\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"info\">\r\n\t\t\t\t\t\t<h2 className=\"info_name\">{user.name || \"USERNAME\"}</h2>\r\n\t\t\t\t\t\t<span className=\"info_login\">@{user.login || \"NOLOGIN\"}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"top_panel_right\">\r\n\t\t\t\t\t<div className=\"info_rating\">\r\n\t\t\t\t\t\t<span className=\"info_rating_icon\"><FaStar/></span>\r\n\t\t\t\t\t\t<span className=\"info_rating_count\">{user.rating || 10000}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"info_position\">\r\n\t\t\t\t\t\t<span className=\"info_position_cnt\"><Link to=\"/rating\" className=\"position_mark\">#{1}</Link> {props.t(\"Pages.User.inRating\")}!</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<section className=\"owners_deck\">\r\n\t\t\t\t<h2 className=\"head_section_owners_deck\">{props.t(\"Pages.User.LastOwnedDecks\")}</h2>\r\n\t\t\t\t<ScrollContainer hideScrollbars={false} className=\"cards\">\r\n\t\t\t\t{\r\n\t\t\t\t\tuser.decks?.length !== 0 && user.decks?.map((deck, index: number) => {\r\n\t\t\t\t\t\treturn <Deck\r\n\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\tid={deck.id}\r\n\t\t\t\t\t\t\tname={deck.name}\r\n\t\t\t\t\t\t\tcountWords={deck.countWords || 0} \r\n\t\t\t\t\t\t\tauthor={deck.author}\r\n\t\t\t\t\t\t\towner={deck.owner}\r\n\t\t\t\t\t\t\tdescription={deck.description}\r\n\t\t\t\t\t\t\tcountRepetitions={deck.countRepetitions || 0} \r\n\t\t\t\t\t\t\tisPrivate={deck.isPrivate} \r\n\t\t\t\t\t\t\tmainLang={deck.mainLang.toUpperCase()} \r\n\t\t\t\t\t\t\tsecondLang={deck.secondLang.toUpperCase()}\r\n\t\t\t\t\t\t\tcountLikes={deck.countLikes || 0}\r\n\t\t\t\t\t\t\tactiveLike={deck.activeLike || false}\r\n\t\t\t\t\t\t\tcards={deck.cards}\r\n\t\t\t\t\t\t\tkey={`deck_${index}`}\r\n\r\n\t\t\t\t\t\t\t// enables\r\n\t\t\t\t\t\t\tenableMethods={{ \r\n\t\t\t\t\t\t\t\tenableChangePrivate: false, \r\n\t\t\t\t\t\t\t\tenableDelete: false, \r\n\t\t\t\t\t\t\t\tenableEdit: false,\r\n\t\t\t\t\t\t\t\tenableLike: props.auth\r\n\t\t\t\t\t\t\t}}\r\n\r\n\t\t\t\t\t\t\tlike={() => API.setLike(deck.id)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</ScrollContainer>\r\n\t\t\t</section>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default withTranslation()(connector(UserPage))","import Decks from \"./Decks\"\r\nimport Home from \"./Home\"\r\nimport Login from \"./Login\"\r\nimport Statistics from \"./Statistics\"\r\nimport Registration from \"./Registration\"\r\nimport Play from \"./Play\"\r\nimport Store from \"./Store\"\r\nimport Rating from \"./Rating\"\r\nimport Main from \"./Main\"\r\nimport UserPage from \"./User\"\r\n\r\nconst Pages = {\r\n\tMain,\r\n\tDecks,\r\n\tHome,\r\n\tStatistics,\r\n\tPlay,\r\n\tStore,\r\n\tRating,\r\n\tRegistration,\r\n\tLogin,\r\n\tUser: UserPage\r\n}\r\n\r\nexport default Pages","import Pages from \"./pages\"\r\nimport { \r\n\tFaHome,\r\n\tFaPlay,\r\n\tFaList,\r\n\tFaStore,\r\n\tFaChartBar,\r\n\tFaStar,\r\n} from \"react-icons/fa\"\r\n \r\nexport interface IRoute{\r\n\tisNavBar?: boolean,\r\n\tisExact?: boolean,\r\n\tpath: string,\r\n\tname: string,\r\n\tcomponent: any,\r\n\tisPrivate?: boolean,\r\n\tisLogin?: boolean,\r\n\ticon?: typeof FaHome\r\n}\r\n\r\nexport const routes: IRoute[] = [\r\n\t// with auth\r\n\t{\r\n\t\t// dashboard - last cards and statistics\r\n\t\tisNavBar: false,\r\n\t\tisLogin: false,\r\n\t\tisExact: true,\r\n\t\tpath: '/',\r\n\t\tname: 'Main',\r\n\t\tcomponent: Pages.Main\r\n\t},\r\n\t{\r\n\t\t// dashboard - last cards and statistics\r\n\t\tisNavBar: false,\r\n\t\tisLogin: true,\r\n\t\tisExact: true,\r\n\t\tisPrivate: true,\r\n\t\tpath: '/home',\r\n\t\tname: 'Home',\r\n\t\tcomponent: Pages.Home,\r\n\t\ticon: FaHome\r\n\t},\r\n\t{\r\n\t\tisNavBar: false,\r\n\t\tisLogin: true,\r\n\t\tisExact: true,\r\n\t\tisPrivate: false,\r\n\t\tpath: '/play/:id',\r\n\t\tname: 'Play',\r\n\t\tcomponent: Pages.Play,\r\n\t\ticon: FaPlay\r\n\t},\r\n\t{\r\n\t\t// public and private Decks - card store\r\n\t\tisNavBar: true,\r\n\t\tisLogin: true,\r\n\t\tisExact: true,\r\n\t\tisPrivate: true,\r\n\t\tpath: '/decks',\r\n\t\tname: 'Decks',\r\n\t\tcomponent: Pages.Decks,\r\n\t\ticon: FaList\r\n\t},\r\n\t{\r\n\t\t// public and private cards - card store\r\n\t\tisNavBar: true,\r\n\t\tisExact: true,\r\n\t\tpath: '/store',\r\n\t\tname: 'Store',\r\n\t\tcomponent: Pages.Store,\r\n\t\ticon: FaStore\r\n\t},\r\n\t{\r\n\t\tisNavBar: false,\r\n\t\tisLogin: true,\r\n\t\tisExact: true,\r\n\t\tisPrivate: true,\r\n\t\tpath: '/statistics',\r\n\t\tname: 'Statistics',\r\n\t\tcomponent: Pages.Statistics,\r\n\t\ticon: FaChartBar\r\n\t},\r\n\t{\r\n\t\tisNavBar: true,\r\n\t\tisExact: true,\r\n\t\tpath: '/rating',\r\n\t\tname: 'Rating',\r\n\t\tcomponent: Pages.Rating,\r\n\t\ticon: FaStar\r\n\t},\r\n\t\r\n\t// not auth\r\n\t{\r\n\t\tisNavBar: true,\r\n\t\tisExact: true,\r\n\t\tisLogin: false,\r\n\t\tpath: '/registration',\r\n\t\tname: 'Registration',\r\n\t\tcomponent: Pages.Registration\r\n\t},\r\n\t{\r\n\t\tisNavBar: true,\r\n\t\tisLogin: false,\r\n\t\tisExact: true,\r\n\t\tpath: '/login',\r\n\t\tname: 'Login',\r\n\t\tcomponent: Pages.Login\r\n\t},\r\n\r\n\r\n\r\n\t// not in header\r\n\t{\r\n\t\tisNavBar: false,\r\n\t\tisLogin: false,\r\n\t\tisExact: true,\r\n\t\tpath: '/user/:login',\r\n\t\tname: 'User',\r\n\t\tcomponent: Pages.User\r\n\t},\r\n\r\n\t\r\n];\r\n","import React from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\n\r\nconst Athorization = (WrappedComponent: typeof React.Component, auth: boolean) => {\r\n  class WithAuthorization extends React.Component {\r\n    render() {\r\n      if (!auth) {\r\n        return <Redirect to=\"/login\" />\r\n      }\r\n\r\n      return <WrappedComponent {...this.props}/>\r\n    }\r\n  }\r\n  return WithAuthorization\r\n};\r\n\r\nexport default Athorization\r\n","import React from \"react\"\r\n\r\nconst Footer: React.FC = () => {\r\n\treturn(\r\n\t\t<footer>\r\n\t\t\t<div className=\"wrap_content\">\r\n\t\t\t\t<div className=\"front\">Front: <a href=\"https://t.me/daniil00q\">Shenyagin Daniil</a><a href=\"https://github.com/daniil00t\">@danii00t</a></div>\r\n\t\t\t\t<div className=\"center\">RepDict&copy;{new Date().getFullYear()}</div>\r\n\t\t\t\t<div className=\"back\">Back: <a href=\"https://t.me/nafanyechka\">Bausov Vadim</a><a href=\"https://github.com/nafanyushka\">@nafanyechka</a></div>\r\n\t\t\t</div>\r\n\t\t</footer>\r\n\t)\r\n}\r\n\r\nexport default Footer","import React from 'react'\r\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom'\r\nimport { connect, ConnectedProps } from 'react-redux'\r\n\r\n// Controllers data\r\nimport API from \"./api\"\r\nimport { routes } from './routes';\r\nimport Action from \"./redux/actions\"\r\n\r\n// Components\r\nimport Components, { showLoader, hideLoader } from \"./components\"\r\nimport Authorization from './hoc/Authorization'\r\nimport ModalContainer from \"./components/modals\"\r\n\r\n// Translation\r\nimport './i18n';\r\n\r\n\r\n\r\n\r\n\r\n// App styles\r\nimport \"./styles/reset.scss\"\r\nimport './styles/main.scss'\r\nimport './styles/responsive.scss'\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\nimport { POPUP_TYPES } from './redux/types'\r\nimport Footer from './components/Footer';\r\nimport { Dispatch } from 'redux';\r\n\r\n// -----------------------------------------------------------------------------\r\n// ---------------------- Connect to redux emmiter -----------------------------\r\n// -----------------------------------------------------------------------------\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n\tauth: state.app.auth,\r\n\tnotify: state.notification,\r\n\tpopupProps: state.popup\r\n})\r\n\r\nconst mapDispatchToProps = (f: Dispatch) => ({\r\n\tlogin: (user: any) => f(Action.app.login(user)),\r\n\tlogout: () => f(Action.app.logout()),\r\n\tconfirm: (head: string, content: string, close: () => void, success: (s: boolean) => void) => \r\n\t\tf(Action.popup.show(POPUP_TYPES.CONFIRM, head, content, {close, success}))\r\n})\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>\r\n\r\ninterface StateApp{\r\n\tauth: boolean\r\n}\r\n\r\n\r\n// -----------------------------------------------------------------------------\r\n// ------------------------- Switcher for Router -------------------------------\r\n// -----------------------------------------------------------------------------\r\n\r\nclass Switcher extends React.PureComponent<StateApp, PropsFromRedux>{\r\n\tconstructor(props: PropsFromRedux){\r\n\t\tsuper(props)\r\n\t}\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<Switch>\r\n\t\t\t\t{routes.map(route => {\r\n\t\t\t\t\tconst component = route.isPrivate ? Authorization(route.component, this.props.auth) : route.component;\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\tkey={route.path}\r\n\t\t\t\t\t\texact\r\n\t\t\t\t\t\tpath={route.path}\r\n\t\t\t\t\t\tcomponent={component}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</Switch>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\n// -----------------------------------------------------------------------------\r\n// -------------------- App class including interfaces -------------------------\r\n// -----------------------------------------------------------------------------\r\n\r\nclass App extends React.Component<PropsFromRedux, StateApp>{\r\n\tpublic state: StateApp = {\r\n\t\tauth: true\r\n\t}\r\n\t// Refs for element which need change because outside click\r\n\t\r\n\r\n\tconstructor(props: PropsFromRedux){\r\n\t\tsuper(props)\r\n\t\tconsole.log(`\r\n    ____  __________  ____  ________________   _________            __\r\n   / __ \\\\/ ____/ __ \\\\/ __ \\\\/  _/ ____/_  __/  / ____/ (_)__  ____  / /_\r\n  / /_/ / __/ / /_/ / / / // // /     / /    / /   / / / _ \\\\/ __ \\\\/ __/\r\n / _, _/ /___/ ____/ /_/ // // /___  / /    / /___/ / /  __/ / / / /_\r\n/_/ |_/_____/_/   /_____/___/\\\\____/ /_/     \\\\____/_/_/\\\\___/_/ /_/\\\\__/\r\n\t\t`);\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\tif(localStorage.getItem(\"token\")?.length !== undefined && localStorage.getItem(\"token\") !== \"undefined\"){\r\n\t\t\tAPI.auth()\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tif(!res.data.error){\r\n\t\t\t\t\t\tthis.setState({ auth: true })\r\n\t\t\t\t\t\tthis.props.login(res.data.data)\r\n\t\t\t\t\t\tconsole.log(res.data.data);\r\n\t\t\t\t\t\thideLoader()\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.props.logout()\r\n\t\t\t\t\t\thideLoader()\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => console.log(err))\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.setState({ auth: false })\r\n\t\t\tlocalStorage.removeItem(\"token\")\r\n\t\t\thideLoader()\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<Router>\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<Components.Header routes={routes.filter(route => route.isNavBar)}/>\r\n\t\t\t\t\t<Switcher auth={this.state.auth || this.props.auth}/>\r\n\t\t\t\t\t<Components.Notification {...this.props.notify}/>\r\n\t\t\t\t\t<ModalContainer {...this.props.popupProps}/>\r\n\t\t\t\t\t<Footer />\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t</Router>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default connector(App)\r\n","/* eslint-disable react/react-in-jsx-scope */\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\nimport RoutedApp from './App'\r\n\r\n\r\nimport store from \"./redux/store\"\r\n\r\nReactDOM.render(\r\n  // eslint-disable-next-line react/react-in-jsx-scope\r\n  <Provider store={store}>\r\n    <RoutedApp />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}